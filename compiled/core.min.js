var AnalyticType,Param,Game,CoreInstanceType,Platform,PreferredRepresentation,ExecutionType,ParamType,RequirementType,__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))};class Core{constructor(e,t){if(null==Core.context&&(Core.context=new Context),null==t||0==t){let e=location;Core.dev=!!e&&("localhost"===location.hostname||"127.0.0.1"===location.hostname)}else Core.dev=t;null==Core.keychain&&(Core.keychain=new Keychain),null!=e&&Core.keychain.addMethod(Keychain.getMethod(e))}getLoginManager(){return new LoginHelper}getContext(){return Core.context}static getKeychain(){return Core.keychain}getInstance(e){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Instance,e).commit("instance/get/").then((e=>Instance.fromObject(e)))}))}getNetwork(e){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Network,e).commit("network/get/").then((e=>Network.fromObject(e)))}))}static getCopy(){return new Core}static getAuth(){let e=null,t=Core.keychain.getMethods();for(let r=0;r<t.length;r++){const n=t[r];if(null==e)e=n;else if(n instanceof CoreSession&&e instanceof Key){e=n;break}}return e}static addAuth(e){Core.keychain.addMethod(e);try{Core.context.updateSubscriptionStatus()}catch(e){}}getPlayer(){return null!=Core.keychain.getSession()?Core.keychain.getSession().getPlayer():null}}try{module.exports=Core}catch(e){}class Analytics{static fromObject(e,t){let r=new Analytics;r.list=new Array,r.base=e.base,r.beggining=Util.date(e.beggining),r.ending=Util.date(e.ending),r.period=Number(e.period);for(let n=0;n<e.list.length;n++){const a=e.list[n];if(t!=AnalyticType.Revenue)throw new Error("Unknown type");r.list.push(RevenueAnalytic.fromObject(a))}return r.type=t,r}asApexSeries(e=[]){let t={};for(let r=0;r<e.length;r++)t[String(e[r])]={name:this.base+" "+String(e[r]).replace(/([a-z0-9])([A-Z])/g,"$1 $2").toLowerCase(),data:[]};for(let r=0;r<this.list.length;r++){const n=this.list[r],a=n.asObject();for(let r=0;r<e.length;r++){const i=String(e[r]);i in a&&t[i].data.push([n.getCreation().getTime(),a[i]])}}let r=[];for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const n=t[e];r.push(n)}return r}fill(e=null){if(null==e||e instanceof Date||(e=Util.date(e)),null==e&&(e=new Date),e instanceof Date){e.getTime()>this.ending.getTime()&&(e=this.ending);let t=this.list.reverse(),r=new Array;for(let n=this.beggining.getTime()/1e3;n<e.getTime()/1e3;n+=this.period)t.length>0&&t[0].getCreation().getTime()/1e3==n?(r.push(t[0]),t.shift()):this.type==AnalyticType.Revenue&&r.push((new RevenueAnalytic).empty(Util.date(n)));if(t.length>0)for(let e=0;e<t.length;e++){const n=t[e];r.push(n)}return this.list=r,this}throw new Error("Unknown until date")}getTotal(e){let t=0;for(let r=0;r<this.list.length;r++){const n=this.list[r];t+=Number(n.asObject()[e])}return t}}class MultipleAnalytics{static fromObject(e,t){let r=new MultipleAnalytics;r.analytics=new Array;for(let n=0;n<e.analytics.length;n++){const a=e.analytics[n];r.analytics.push(Analytics.fromObject(a,t))}return r}fill(e=null){let t=new Array;for(let r=0;r<this.analytics.length;r++)t.push(this.analytics[r].fill(e));return this.analytics=t,this}}!function(e){e[e.Revenue=0]="Revenue"}(AnalyticType||(AnalyticType={}));class RevenueAnalytic{static fromObject(e){let t=new RevenueAnalytic;return t.creation=Util.date(e.creation),t.distinctCustomers=Number(e.distinctCustomers),t.totalRequests=Number(e.totalRequests),t.totalPayments=Number(e.totalPayments),t.totalRequested=Number(e.totalRequested),t.totalPaid=Number(e.totalPaid),t.totalDiscounted=Number(e.totalDiscounted),t.totalPotentialDiscount=Number(e.totalPotentialDiscount),t.totalTaxes=Number(e.totalTaxes),t.totalDisputed=Number(e.totalDisputed),t.totalRefunded=Number(e.totalRefunded),t.totalNet=Number(e.totalNet),t.totalGross=Number(e.totalGross),t.currency=String(e.currency),t}empty(e){return this.creation=e,this.distinctCustomers=0,this.totalRequests=0,this.totalPayments=0,this.totalRequested=0,this.totalPaid=0,this.totalDiscounted=0,this.totalPotentialDiscount=0,this.totalTaxes=0,this.totalDisputed=0,this.totalRefunded=0,this.totalNet=0,this.totalGross=0,this.currency=null,this}asObject(){return JSON.parse(JSON.stringify(this))}getCreation(){return this.creation}getBase(){return this.currency}}class Keychain{constructor(){this.authMethods=new Array}addMethod(e){this.authMethods.push(e)}getSession(){for(let e=0;e<this.authMethods.length;e++){const t=this.authMethods[e];if(t instanceof CoreSession)return t}return null}getMethods(){return this.authMethods}removeSessions(){let e=new Array;for(let t=0;t<this.authMethods.length;t++){const r=this.authMethods[t];r instanceof CoreSession||e.push(r)}this.authMethods=e}static getMethod(e){return"string"==typeof e?new Key(e):"object"==typeof e?CoreSession.fromObject(e):void 0}}class LoginHelper{constructor(e=!0){if(this.autoLogin=e,this.loggedIn=!1,this.autoLogin)try{this.loadSession(),this.loggedIn=!0}catch(e){}Core.getAuth()instanceof CoreSession&&(this.loggedIn=!0)}isLoggedIn(){return this.loggedIn}loadSession(){let e=CoreSession.load();return Core.addAuth(e),e}logout(){null!=localStorage.getItem(btoa("purecore-"+window.location.hostname+"l"))&&localStorage.removeItem(btoa("purecore-"+window.location.hostname+"l")),null!=localStorage.getItem(btoa("purecore-"+window.location.hostname+"d"))&&localStorage.removeItem(btoa("purecore-"+window.location.hostname+"d")),null!=localStorage.getItem(btoa("purecore-"+window.location.hostname+"h"))&&localStorage.removeItem(btoa("purecore-"+window.location.hostname+"h")),Core.getKeychain().removeSessions(),this.loggedIn=!1}login(e){return new Promise(((t,r)=>{if(e=Util.platformVal(e),null!=window)try{null!=LoginHelper.activeWindow&&LoginHelper.activeWindow.close();let n=600,a=400;const i=window.top.outerHeight/2+window.top.screenY-n/2,o=window.top.outerWidth/2+window.top.screenX-a/2;let s=window.open(this.getURL(e),"Login",`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${a}, height=${n}, top=${i}, left=${o}`);LoginHelper.activeWindow=s;let l=!0,c=null;window.addEventListener("message",(e=>{if("https://api.purecore.io"===e.origin)switch(e.data.message){case"login":l&&(c=Keychain.getMethod(e.data.data),Core.addAuth(c),s.closed||(s.close(),LoginHelper.activeWindow=null),l=!1),this.autoLogin&&c instanceof CoreSession&&(c.save(),this.loggedIn=!0),t(c)}}),!1);let u=setInterval((()=>{null!=LoginHelper.activeWindow&&LoginHelper.activeWindow.closed&&(LoginHelper.activeWindow=null),s.closed&&null==c&&(l=!1,clearInterval(u),r(new Error("The popup was closed before any session was retrieved")))}),50)}catch(e){r(e)}else r(new Error("In order to create a login popup, you must be executing purecore from a Document Object Model"))}))}getURL(e){let t="";switch(e){case Platform.Stadia:t+="google";break;case Platform.Steam:t+="steam";break;case Platform.Xbox:t+="microsoft";break;case Platform.Discord:t+="discord";break;default:throw new Error("Unsupported login method")}return`https://api.purecore.io/login/${t}/`}}class Key{constructor(e,t,r,n,a,i){this.hash=e,this.id=t,this.type=r,this.restrict=n,this.allowedReferrers=a,this.allowedRegions=i}getCredentials(){return this.hash}getParam(){return Param.Hash}static fromObject(e){if("hash"in e){let t=new Key(String(e.hash));if("id"in e&&(t.id=String(e.id)),"restrict"in e&&(t.restrict=Boolean(e.restrict)),"allowedReferrers"in e&&(t.allowedReferrers=new Array,Array.isArray(e.allowedReferrers)))for(let r=0;r<e.allowedReferrers.length;r++){const n=e.allowedReferrers[r];t.allowedReferrers.push(RefererRestriction.fromObject(n))}if("allowedRegions"in e&&(t.allowedRegions=new Array,Array.isArray(e.allowedRegions)))for(let r=0;r<e.allowedRegions.length;r++){const n=e.allowedRegions[r];t.allowedRegions.push(RegionRestriction.fromObject(n))}return t}throw new MissingProp("hash")}}class RefererRestriction{constructor(e,t,r){this.index=e,this.domain=t,this.ip=r}static fromObject(e){let t=new RefererRestriction;return t.index=Number(e.index),t.domain=String(e.domain),t.ip=String(e.ip),t}}class RegionRestriction{constructor(e,t,r,n){this.index=e,this.country=t,this.state=r,this.city=n}static fromObject(e){let t=new RegionRestriction;return t.index=Number(e.index),t.country=String(e.country),t.state=String(e.state),t.city=String(e.city),t}}class CoreSession{constructor(e,t,r,n,a,i,o){this.owner=e,this.location=t,this.device=r,this.usage=n,this.id=a,this.hash=i,this.network=o}getCredentials(){return this.hash}getParam(){return Param.Hash}asObject(){return{owner:this.owner.asObject(),location:this.location.asObject(),device:this.device.asObject(),usage:this.usage.asObject(),id:this.id,hash:this.hash,network:null==this.network?null:this.network.asObject()}}save(){if(!localStorage)throw new Error("Local storage unavailable");{let e=Math.floor(128*Math.random()),t=btoa(Util.generateGibberish(256+e)+this.hash+Util.generateGibberish(256+e)),r=Util.shortLengthToLong(e),n=this.asObject();delete n.hash,localStorage.setItem(btoa("purecore-"+window.location.hostname+"h"),t),localStorage.setItem(btoa("purecore-"+window.location.hostname+"d"),btoa(JSON.stringify(n))),localStorage.setItem(btoa("purecore-"+window.location.hostname+"l"),r)}}static load(){let e=localStorage.getItem(btoa("purecore-"+window.location.hostname+"h")),t=localStorage.getItem(btoa("purecore-"+window.location.hostname+"d")),r=localStorage.getItem(btoa("purecore-"+window.location.hostname+"l"));if(null!=e){if(null!=r){if(null!=t){let n=Util.longLengthToShort(r),a=atob(e),i=a.substr(256+n,a.length-2*(256+n)),o=JSON.parse(atob(t));return o.hash=i,CoreSession.fromObject(Keychain.getMethod(o))}throw localStorage.removeItem(btoa("purecore-"+window.location.hostname+"h")),localStorage.removeItem(btoa("purecore-"+window.location.hostname+"l")),new Error("Missing non-sensitive data")}throw localStorage.removeItem(btoa("purecore-"+window.location.hostname+"h")),new Error("No hash length found")}throw null!=r&&localStorage.removeItem(btoa("purecore-"+window.location.hostname+"l")),null!=t&&localStorage.removeItem(btoa("purecore-"+window.location.hostname+"d")),new Error("No hash found")}static fromObject(e){let t=new CoreSession;return"owner"in e&&(t.owner=Player.fromObject(e.owner)),"location"in e&&(t.location=SessionLocation.fromObject(e.location)),"device"in e&&(t.device=SessionDevice.fromObject(e.device)),"usage"in e&&(t.usage=SessionUsage.fromObject(e.usage)),"id"in e&&(t.id=String(e.id)),"hash"in e&&(t.hash=String(e.hash)),"network"in e&&(null!=e.network?t.network=Network.fromObject(e.network):t.network=null),t}getPlayer(){return this.owner}}class SessionDevice{constructor(e,t,r,n){this.os=e,this.device=t,this.brand=r,this.model=n}asObject(){return JSON.parse(JSON.stringify(this))}static fromObject(e){let t=new SessionDevice;return t.os=String(e.os),t.device=String(e.device),t.brand=String(e.brand),t.model=String(e.model),t}}class SessionLocation{constructor(e,t,r){this.city=e,this.state=t,this.country=r}asObject(){return JSON.parse(JSON.stringify(this))}static fromObject(e){let t=new SessionLocation;return t.city=String(e.city),t.state=String(e.state),t.country=String(e.country),t}}class SessionUsage{constructor(e,t){this.creation=e,this.uses=t}asObject(){let e=JSON.parse(JSON.stringify(this));return e.creation=Util.epoch(this.creation),e}static fromObject(e){let t=new SessionUsage;return t.creation=Util.date(e.creation),t.uses=Number(e.uses),t}}class Address{constructor(e,t,r,n,a,i,o,s){this.name=e,this.email=t,this.country=r,this.state=n,this.city=a,this.postalCode=i,this.line1=o,this.line2=s}static fromObject(e){let t=new Address;return t.name=null==e.name?null:String(e.name),t.email=null==e.email?null:String(e.email),t.country=null==e.country?null:String(e.country),t.state=null==e.state?null:String(e.state),t.city=null==e.city?null:String(e.city),t.postalCode=null==e.postalcode?null:String(e.postalcode),t.line1=null==e.line1?null:String(e.line1),t.line2=null==e.name?null:String(e.line2),t}asObject(){let e={};return null!=this.name&&(e.name=this.name),null!=this.email&&(e.email=this.email),null!=this.country&&(e.country=this.country),null!=this.state&&(e.state=this.state),null!=this.city&&(e.city=this.city),null!=this.postalCode&&(e.postalcode=this.postalCode),null!=this.line1&&(e.line1=this.line1),null!=this.line2&&(e.line2=this.line2),e}asQuery(){return JSON.stringify(this.asObject())}}class Method{static fromObject(e){let t=new Method;return t.creation=Util.date(e.creation),t.type=null==e.type?null:String(e.type),t.brand=null==e.brand?null:String(e.brand),t.wallet=null==e.wallet?null:String(e.wallet),t.id=null==e.id?null:String(e.id),t.visibleId=null==e.type?null:String(e.visibleId),t.default=!0===e.default,t}getId(){return this.id}getVisibleId(){return this.visibleId}isDefault(){return this.default}}class SubscriptionStatus{static fromObject(e){let t=new SubscriptionStatus;return t.plus=Boolean(e.plus),t.plusReview=Boolean(e.plusReview),t.plusGateway=Number(e.plusGateway),t.hostingReview=Boolean(e.hostingReview),t.hostingGateway=Number(e.hostingGateway),t.usedTrial=Util.date(e.usedTrial),t}isSubbed(){return this.plus}didUseTrial(){return null!=this.usedTrial}}class Call{constructor(){this.baseURL="https://api.purecore.io/rest/3",this.paramList=new Array}addParam(e,t){return this.paramList.push(new CallParam(e,t)),this}commit(e){return __awaiter(this,void 0,void 0,(function*(){let t={};for(let e=0;e<this.paramList.length;e++){const r=this.paramList[e];t[r.param]=r.value}let r=Core.getAuth();null!=r&&(t[r.getParam()]=r.getCredentials());let n=Call.formatEndpoint(e);const a=this.baseURL+n+"?"+Object.keys(t).filter((e=>t.hasOwnProperty(e))).map((e=>encodeURIComponent(e)+"="+encodeURIComponent(t[e]))).join("&");if(Core.dev){var i=t;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&e==r.getParam()&&(i[e]="***");console.log(this.baseURL+n,i)}return new Promise(((e,t)=>fetch(a,{method:"POST"}).then((e=>e.json())).then((t=>{if("error"in t)throw new Error(t.error+". "+t.msg);e(t)})).catch((e=>t(e)))))}))}static formatEndpoint(e){return(e.startsWith("/")?"":"/")+e+(e.endsWith("/")?"":"/")}}class CallParam{constructor(e,t){this.param=e,this.value=t}}!function(e){e.Year="ye",e.Month="mo",e.Week="we",e.Day="da",e.Hour="ho",e.Epoch="ep",e.Address="ad",e.PaymentMethod="pm",e.Key="k",e.Hash="h",e.Session="ses",e.Code="c",e.PaymentHash="ph",e.Bank="b",e.Description="desc",e.Name="nm",e.Platform="plt",e.Cname="cnm",e.Game="gme",e.PlatformId="plid",e.PlatformName="plnm",e.Quantity="qty",e.Value="val",e.Ip="ip",e.DeviceFingerprint="dv",e.ForumCategory="fc",e.ForumEmote="fe",e.ForumObject="fo",e.ForumOpinion="fop",e.ForumPost="fp",e.ForumReaction="fr",e.ForumReply="frp",e.ForumSection="fs",e.Connection="cn",e.Connections="cs",e.Command="cmd",e.CommandExecution="cex",e.ExecutionTemplate="ext",e.Delay="de",e.RequireOnline="ro",e.EnvSource="es",e.Host="ht",e.Image="hi",e.ImageEnv="hie",e.HostTemplate="htt",e.Instance="i",e.Instances="is",e.Network="n",e.Server="s",e.Servers="ss",e.ServerGroup="sg",e.KeyId="kid",e.Machine="m",e.Notification="not",e.Payment="p",e.Discount="d",e.Discounts="ds",e.StoreItem="si",e.StoreItems="sis",e.StoreParam="sp",e.StoreParamResponse="spr",e.StoreParamResponses="sprs",e.Perk="pk",e.Perks="pks",e.StoreCategory="sc",e.PerkCategory="pc",e.Countable="cnt",e.Price="pr",e.Amount="am",e.ExecutionType="et",e.Punishment="pn",e.Appeal="a",e.Report="r",e.Offence="o",e.Offences="os",e.PunishmentAction="pa",e.VotingSite="vs",e.Ticket="t",e.TicketCategory="tc",e.TicketReply="tr",e.Player="pl",e.Profile="pp",e.NetworkPlayer="np"}(Param||(Param={}));class MissingProp extends Error{constructor(e){super(e),this.name="MissingProp"}}!function(e){e[e.Minecraft=0]="Minecraft",e[e.MinecraftBedrock=1]="MinecraftBedrock",e[e.SpaceEngineers=2]="SpaceEngineers",e[e.Unknown=-1]="Unknown"}(Game||(Game={}));class Instance{constructor(e,t,r){this.id=e,this.name=t,this.type=r}static fromObject(e){let t=new Instance;return t.id=String(e.id),t.name=String(e.name),t.online=Boolean(e.online),t.type=Number(e.type),t}connect(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Instance,this.id).commit("instance/log/connection/").then((()=>{}))}))}disconnect(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Instance,this.id).commit("instance/log/disconnection").then((()=>{}))}))}isOnline(){return this.online}asNetwork(){return new Network(this.id,this.name,Game.Unknown,Platform.Unknown)}getId(){return this.id}delete(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Instance,this.id).commit("instance/delete").then((()=>{}))}))}}!function(e){e[e.Network=0]="Network",e[e.Server=1]="Server"}(CoreInstanceType||(CoreInstanceType={}));class Network{constructor(e,t,r,n){this.id=e,this.name=t,this.game=r,this.platform=n}asStore(){return new Store(this.id,this.name,this.game,this.platform)}asWebsite(){return new Website(this.id,this.name,this.game,this.platform)}getId(){return this.id}asObject(){return JSON.parse(JSON.stringify(this))}createExecutionTemplate(e,t,r,n){return __awaiter(this,void 0,void 0,(function*(){let a=Array();for(let t=0;t<e.length;t++){const r=e[t];"string"==typeof r?a.push(r):r instanceof Instance&&a.push(r.getId())}return yield(new Call).addParam(Param.Network,this.id).addParam(Param.Instances,JSON.stringify(a)).addParam(Param.Command,t).addParam(Param.RequireOnline,Number(r)).addParam(Param.Delay,n).commit("execution/template/create").then((e=>ExecutionTemplate.fromObject(e)))}))}static fromObject(e){let t=new Network;return t.name=String(e.name),t.id=String(e.id),t.game=Number(e.game),t.platform=Number(e.platform),t}asInstance(){return new Instance(this.id,this.name,CoreInstanceType.Network)}getMonthRevenue(e=null,t=null){return __awaiter(this,void 0,void 0,(function*(){let r=new Call;return r.addParam(Param.Network,this.id),null!=e&&null!=t&&(r.addParam(Param.Month,e),r.addParam(Param.Year,t)),r.commit("analytics/revenue/month").then((e=>MultipleAnalytics.fromObject(e,AnalyticType.Revenue)))}))}getServers(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Network,this.id).commit("instance/group/list").then((e=>{let t=new Array;if(Array.isArray(e)){for(let r=0;r<e.length;r++){const n=e[r];t.push(ServerGroupList.fromObject(n))}return t}throw new Error("Invalid result")}))}))}createServer(e){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Network,this.id).addParam(Param.Name,e).commit("instance/create").then((e=>Server.fromObject(e)))}))}createServerGroup(e){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Network,this.id).addParam(Param.Name,e).commit("instance/group/create").then((e=>ServerGroup.fromObject(e)))}))}delete(e){return __awaiter(this,void 0,void 0,(function*(){return e?yield(new Call).addParam(Param.Instance,this.id).commit("instance/delete").then((()=>{})):new Promise(((e,t)=>{t(new Error("missing confirmation"))}))}))}}!function(e){e[e.Unknown=-1]="Unknown",e[e.Mojang=0]="Mojang",e[e.Xbox=1]="Xbox",e[e.Steam=2]="Steam",e[e.Stadia=3]="Stadia",e[e.EpicGames=4]="EpicGames",e[e.Discord=5]="Discord"}(Platform||(Platform={}));class Server{constructor(e,t,r,n){this.network=e,this.id=t,this.name=r,this.group=n}isOnline(){return this.online}static fromObject(e){let t=new Server;return t.id=String(e.id),t.name=String(e.name),t.group=null,"group"in e&&null!=e.group&&(t.group=ServerGroup.fromObject(e.group)),t.online=Boolean(e.online),t}asInstance(){return new Instance(this.id,this.name,CoreInstanceType.Server)}getGroup(){return this.group}setGroup(e){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Server,this.id).addParam(Param.ServerGroup,e.getId()).commit("instance/group/set").then((e=>{let t=Server.fromObject(e);return this.group=t.getGroup(),t}))}))}ungroup(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Server,this.id).commit("instance/group/unset").then((e=>{let t=Server.fromObject(e);return this.group=t.getGroup(),t}))}))}}class ServerGroupList{constructor(e,t,r,n){this.id=e,this.name=t,this.network=r,this.servers=n}static fromObject(e){let t=new ServerGroupList;if(t.id=null==e.id?null:String(e.id),t.name=null==e.name?null:String(e.name),t.network=null,"network"in e&&null!=e.network&&(t.network=Network.fromObject(e.network)),t.servers=new Array,"servers"in e&&null!=e.servers&&Array.isArray(e.servers))for(let r=0;r<e.servers.length;r++)t.servers.push(Server.fromObject(e.servers[r]));return t}getId(){return this.id}getName(){return this.name}getServers(){return this.servers}asServerGroup(){return new ServerGroup(this.id,this.network,this.name)}}class ServerGroup{constructor(e,t,r){this.id=e,this.network=t,this.name=r}getId(){return this.id}getName(){return this.name}static fromObject(e){let t=new ServerGroup;return t.id=null==e.id?null:String(e.id),t.network=null,"network"in e&&null!=e.network&&(t.network=Network.fromObject(e.network)),t.name=null==e.name?null:String(e.name),t}delete(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.ServerGroup,this.id).commit("instance/group/delete").then((()=>{}))}))}}class Store extends Network{constructor(e,t,r,n){super(e,t,r,n)}getRepresentation(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Network,this.getId()).commit("store/representation/").then((e=>StoreRepresentation.fromObject(e)))}))}getPerkRepresentation(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).addParam(Param.Network,this.getId()).commit("store/representation/perks/").then((e=>StorePerkRepresentation.fromObject(e)))}))}createCategory(e,t=null){return __awaiter(this,void 0,void 0,(function*(){let r=(new Call).addParam(Param.Network,this.getId()).addParam(Param.Name,e);return null!=t&&r.addParam(Param.Description,t),yield r.commit("store/item/category/create/").then((e=>ItemCategory.fromObject(e)))}))}createPerkCategory(e,t=null){return __awaiter(this,void 0,void 0,(function*(){let r=(new Call).addParam(Param.Network,this.getId()).addParam(Param.Name,e);return null!=t&&r.addParam(Param.Description,t),yield r.commit("store/perk/category/create/").then((e=>PerkCategory.fromObject(e)))}))}}class ExecutionTemplate{constructor(e,t,r,n,a){this.id=e,this.string=t,this.requireOnline=r,this.instances=n,this.delay=a}static fromObject(e){let t=new Array;for(let r=0;r<e.instances.length;r++){const n=e.instances[r];t.push(Instance.fromObject(n))}return new ExecutionTemplate(e.id,e.string,e.requireOnline,t,e.delay)}}class StoreItem{constructor(e,t,r,n,a,i,o,s,l,c){this.id=e,this.name=t,this.description=r,this.icon=n,this.banner=a,this.price=i,this.perks=o,this.enable=s,this.list=l,this.archived=c}static fromObject(e){let t=new Array;for(let r=0;r<e.perks.length;r++){const n=e.perks[r];t.push(PerkCategoryRepresentation.fromObject(n))}return new StoreItem(e.id,e.name,e.description,e.icon,e.banner,e.price,t,e.enable,e.list,e.archived)}addPerk(e,t=null){return __awaiter(this,void 0,void 0,(function*(){let r=e;e instanceof Perk&&(r=e.id);let n=(new Call).addParam(Param.StoreItem,this.id).addParam(Param.Perk,r);return null!=t&&n.addParam(Param.Quantity,t),yield n.commit("store/item/perk/add/").then((e=>PerkContext.fromObject(e)))}))}removePerk(e){return __awaiter(this,void 0,void 0,(function*(){let t=e;return(e instanceof Perk||e instanceof PerkContext)&&(t=e.id),(new Call).addParam(Param.StoreItem,this.id).addParam(Param.Perk,t).commit("store/item/perk/remove/").then((()=>{}))}))}}class ItemCategory{constructor(e,t,r,n,a,i,o,s,l,c){this.id=e,this.name=t,this.description=r,this.icon=n,this.banner=a,this.preferredRepresentation=i,this.list=o,this.enabled=s,this.upgradable=l,this.archived=c}static fromObject(e){let t=null;switch(e.preferredRepresentation){case 0:t=PreferredRepresentation.List;break;case 1:t=PreferredRepresentation.Box;break;case 2:t=PreferredRepresentation.Table;break;case 3:t=PreferredRepresentation.Carousel;break;default:t=PreferredRepresentation.Unknown}return new ItemCategory(e.id,e.name,e.description,e.icon,e.banner,t,e.list,e.enabled,e.upgradable,e.archived)}createItem(e,t,r=null){return __awaiter(this,void 0,void 0,(function*(){let n=(new Call).addParam(Param.StoreCategory,this.id).addParam(Param.Name,e).addParam(Param.Price,t);return null!=r&&n.addParam(Param.Description,r),yield n.commit("store/item/create/").then((e=>StoreItem.fromObject(e)))}))}}!function(e){e[e.Unknown=-1]="Unknown",e[e.List=0]="List",e[e.Box=1]="Box",e[e.Table=2]="Table",e[e.Carousel=3]="Carousel"}(PreferredRepresentation||(PreferredRepresentation={}));class ItemCategoryRepresentation{constructor(e,t){this.itemCategory=e,this.items=t}static fromObject(e){const t=ItemCategory.fromObject(e.itemCategory);let r=new Array;for(let t=0;t<e.items.length;t++){const n=e.items[t];r.push(StoreItem.fromObject(n))}return new ItemCategoryRepresentation(t,r)}}class Perk{constructor(e,t,r,n,a,i,o){this.id=e,this.name=t,this.description=r,this.countable,this.params=a,this.commands=i,this.archived=o}static fromObject(e){let t=new Array;for(let r=0;r<e.params.length;r++){const n=e.params[r];t.push(PerkParam.fromObject(n))}return new Perk(e.id,e.name,e.description,e.countable,t,ExecutionSetup.fromObject(e.commands),e.archived)}addExecutionTemplate(e,t){return __awaiter(this,void 0,void 0,(function*(){let r=e;e instanceof ExecutionTemplate&&(r=e.id);return yield(new Call).addParam(Param.Perk,this.id).addParam(Param.ExecutionTemplate,r).addParam(Param.ExecutionType,t).commit("store/item/category/create/").then((()=>{}))}))}}class PerkContext{constructor(e,t,r,n,a,i,o,s){this.id=e,this.name=t,this.description=r,this.countable,this.params=a,this.commands=i,this.quantity=o,this.archived=s}static fromObject(e){let t=new Array,r=new Array;for(let r=0;r<e.params.length;r++){const n=e.params[r];t.push(PerkParam.fromObject(n))}for(let t=0;t<e.commands.length;t++){const n=e.commands[t];r.push(ExecutionTemplate.fromObject(n))}return new PerkContext(e.id,e.name,e.description,e.countable,t,r,e.quantity,e.archived)}}class PerkCategory{constructor(e,t,r,n){this.id=e,this.name=t,this.description=r,this.archived=n}static fromObject(e){return new PerkCategory(e.id,e.name,e.description,e.archived)}createPerk(e,t,r=null){return __awaiter(this,void 0,void 0,(function*(){const n=t?"true":"false";let a=(new Call).addParam(Param.PerkCategory,this.id).addParam(Param.Name,e).addParam(Param.Countable,n);return null!=r&&a.addParam(Param.Description,r),yield a.commit("store/perk/create/").then((e=>Perk.fromObject(e)))}))}}class PerkCategoryRepresentation{constructor(e,t){this.perkCategory=e,this.perks=t}static fromObject(e){let t=new Array;for(let r=0;r<e.perks.length;r++){const n=e.perks[r];"quantity"in n?t.push(PerkContext.fromObject(n)):t.push(Perk.fromObject(n))}return new PerkCategoryRepresentation(PerkCategory.fromObject(e.perkCategory),t)}}class ExecutionSetup{static fromObject(e){let t=new ExecutionSetup;t.uponPayment=new Array;for(let r=0;r<e.uponPayment.length;r++){const n=e.uponPayment[r];t.uponPayment.push(ExecutionTemplate.fromObject(n))}t.uponRefund=new Array;for(let r=0;r<e.uponRefund.length;r++){const n=e.uponRefund[r];t.uponRefund.push(ExecutionTemplate.fromObject(n))}t.uponDispute=new Array;for(let r=0;r<e.uponDispute.length;r++){const n=e.uponDispute[r];t.uponDispute.push(ExecutionTemplate.fromObject(n))}return t}}!function(e){e[e.UponPayment=0]="UponPayment",e[e.UponRefund=1]="UponRefund",e[e.UponDispute=2]="UponDispute"}(ExecutionType||(ExecutionType={}));class ParamRequirement{constructor(e,t){this.type=e,this.value=t}static fromObject(e){let t=null,r=null;switch(e.type){case 0:t=RequirementType.RegExp,r=RegExp(e.value);break;case 1:t=RequirementType.ImageType,r=String(e.value);break;case 2:t=RequirementType.ImageSize,r=new Array;for(let t=0;t<e.value.length;t++){const n=e.value[t];r.push(Number(n))}break;default:t=RequirementType.Unknown}return new ParamRequirement(t,r)}}!function(e){e[e.Unknown=-1]="Unknown",e[e.String=0]="String",e[e.Image=1]="Image"}(ParamType||(ParamType={}));class PerkParam{constructor(e,t,r,n,a,i,o,s,l){this.id=e,this.placeholder=t,this.name=r,this.description=n,this.type=a,this.default=i,this.mandatory=o,this.requirements=s,this.archived=l}static fromObject(e){let t=new Array,r=null;switch(e.type){case 0:r=ParamType.String;break;case 1:r=ParamType.Image;break;default:r=ParamType.Unknown}for(let r=0;r<e.requirements.length;r++){const n=e.requirements[r];t.push(ParamRequirement.fromObject(n))}return new PerkParam(e.id,e.placeholder,e.name,e.description,r,e.default,e.mnandatory,t,e.archived)}}!function(e){e[e.Unknown=-1]="Unknown",e[e.RegExp=0]="RegExp",e[e.ImageType=1]="ImageType",e[e.ImageSize=2]="ImageSize"}(RequirementType||(RequirementType={}));class StorePerkRepresentation{constructor(e){this.perkRepresentations=e}static fromObject(e){let t=new Array;for(let r=0;r<e.perkRepresentations.length;r++){const n=e.perkRepresentations[r];t.push(PerkCategoryRepresentation.fromObject(n))}return new StorePerkRepresentation(t)}}class StoreRepresentation{constructor(e){this.itemCategoryRepresentations=e}static fromObject(e){let t=new Array;for(let r=0;r<e.itemCategoryRepresentations.length;r++){const n=e.itemCategoryRepresentations[r];t.push(ItemCategoryRepresentation.fromObject(n))}return new StoreRepresentation(t)}}class Player{constructor(e,t,r,n,a,i,o){this.id=e,this.creation=t,this.username=r,this.lastLogin=n,this.lastUpdated=a,this.bio=i,this.birthdate=o}asObject(){let e=JSON.parse(JSON.stringify(this));return e.lastUpdated=Util.epoch(this.getLastUpdated()),e.lastLogin=Util.epoch(this.getLastLogin()),e.birthdate=Util.epoch(this.getBirthdate()),e.creation=Util.epoch(this.getCreation()),e}getLastUpdated(){return this.lastUpdated}getLastLogin(){return this.lastLogin}getBirthdate(){return this.birthdate}getCreation(){return this.creation}static fromObject(e){let t=new Player;return"id"in e&&(t.id=String(e.id)),"creation"in e&&(t.creation=Util.date(e.creation)),"username"in e&&(t.username=null==e.username?null:String(e.username)),"lastLogin"in e&&(t.lastLogin=Util.date(e.lastLogin)),"lastUpdated"in e&&(t.lastUpdated=Util.date(e.lastUpdated)),"bio"in e&&(t.bio=null==e.bio?null:String(e.bio)),"birthdate"in e&&(t.birthdate=Util.date(e.birthdate)),t}asOwner(){return new Owner(this.id,this.creation,this.username,this.lastLogin,this.lastUpdated,this.bio,this.birthdate)}getBilling(){return new PlayerBilling(this.id,this.creation,this.username,this.lastLogin,this.lastUpdated,this.bio,this.birthdate)}}class Owner extends Player{constructor(e,t,r,n,a,i,o){super(e,t,r,n,a,i,o)}asObject(){let e=JSON.parse(JSON.stringify(this));return e.lastUpdated=Util.epoch(this.getLastUpdated()),e.lastLogin=Util.epoch(this.getLastLogin()),e.birthdate=Util.epoch(this.getBirthdate()),e.creation=Util.epoch(this.getCreation()),e}getNetworks(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).commit("network/list/").then((e=>{if(Array.isArray(e)){let t=new Array;for(let r=0;r<e.length;r++)t.push(Network.fromObject(e[r]));return t}throw new Error("Invalid type")}))}))}createNetwork(e,t,r,n){return __awaiter(this,void 0,void 0,(function*(){return r=Util.gameVal(r),n=Util.platformVal(n),yield(new Call).addParam(Param.Name,e).addParam(Param.Cname,t).addParam(Param.Game,r).addParam(Param.Platform,n).commit("network/create/").then((e=>Network.fromObject(e)))}))}}class PlayerBilling extends Player{constructor(e,t,r,n,a,i,o){super(e,t,r,n,a,i,o)}getSubscriptionStatus(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).commit("player/billing/subscription/status/").then((e=>{let t=SubscriptionStatus.fromObject(e);return Core.context.setSubscriptionStatus(t),t}))}))}subscribeWithStripe(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).commit("player/billing/subscription/plus/start/stripe/").then((e=>{let t=SubscriptionStatus.fromObject(e);return Core.context.setSubscriptionStatus(t),t}))}))}cancelPlus(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).commit("player/billing/subscription/plus/cancel/").then((e=>SubscriptionStatus.fromObject(e)))}))}getPaymentMethods(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).commit("player/billing/method/list/").then((e=>{let t=new Array;for(let r=0;r<e.length;r++){const n=e[r];t.push(Method.fromObject(n))}return t}))}))}addPaymentMethod(e,t=!1){return __awaiter(this,void 0,void 0,(function*(){let r=null;r="string"==typeof e?e:e.getId();let n="player/billing/method/add/";return t&&(n="player/billing/method/add/default/"),yield(new Call).addParam(Param.PaymentMethod,r).commit(n).then((e=>Method.fromObject(e)))}))}detachPaymentMethod(e){return __awaiter(this,void 0,void 0,(function*(){let t=null;return t="string"==typeof e?e:e.getId(),yield(new Call).addParam(Param.PaymentMethod,t).commit("player/billing/method/detach/").then((()=>{}))}))}getBillingAddress(){return __awaiter(this,void 0,void 0,(function*(){return yield(new Call).commit("player/billing/address/get/").then((e=>Address.fromObject(e)))}))}setBillingAddress(e){return __awaiter(this,void 0,void 0,(function*(){return e instanceof Address||(e=Address.fromObject(e)),yield(new Call).addParam(Param.Address,e.asQuery()).commit("player/billing/address/set/").then((e=>Address.fromObject(e)))}))}}class Context{getNetwork(){return this.network}getSubscriptionStatus(){return this.subscriptionStatus}updateSubscriptionStatus(){let e=this;Core.getCopy().getPlayer().getBilling().getSubscriptionStatus().then((t=>{e.subscriptionStatus=t}))}setSubscriptionStatus(e){this.subscriptionStatus=e}setNetwork(e){if("string"==typeof e){let t=this;t.network=new Network(String(e),null,null,null),Core.getCopy().getNetwork(e).then((e=>{t.network=e}))}else this.network=e}}class Util{static dec2hex(e){return e.toString(16).padStart(2,"0")}static generateGibberish(e){var t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,Util.dec2hex).join("")}static shortLengthToLong(e){let t="",r=Math.floor(16*Math.random());r%2<=0&&(r+=1);let n=16+r;t=Number(e*r).toString(2);let a="";for(let e=0;e<n;e++)a+=e==n-1?String(e)+t:String(e)+t+"!@#";return btoa(a)}static longLengthToShort(e){let t=atob(e).split("!@#"),r=parseInt(t[0].substring(1,t[0].length-1),2)/(t.length-16);return Math.floor(2*r)}static epoch(e){return null==e?null:e.getTime()/1e3}static date(e){if(null!=e&&0!=e){let t=new Date(0);return t.setUTCSeconds(e),t}return null}static gameVal(e){if("string"==typeof e)if(isNaN(Number(e)))switch(e=String(e).toLowerCase(),!0){case["mc","minecraft"].includes(e):e=Game.Minecraft;break;case["mc bedrock","bedrock","minecraft bedrock","minecraft_bedrock","minecraftbedrock"].includes(e):e=Game.MinecraftBedrock,console.log(e);break;case["se","spaceengineers","space engineers"].includes(e):e=Game.SpaceEngineers;break;default:e=Game.Unknown}else e=Number(e);return Game.SpaceEngineers,e<Game.Unknown&&(e=Game.Unknown),e}static platformVal(e){if("string"==typeof e)if(isNaN(Number(e)))switch(e=String(e).toLowerCase(),!0){case["mojang"].includes(e):e=Platform.Mojang;break;case["xbox","microsoft"].includes(e):e=Platform.Xbox;break;case["google","stadia"].includes(e):e=Platform.Stadia;break;case["steam","valve"].includes(e):e=Platform.Steam;break;case["discord","discord-o!"].includes(e):e=Platform.Discord;break;case["epic","epicgames"].includes(e):e=Platform.EpicGames;break;default:e=Platform.Unknown}else e=Number(e);return Platform.Discord,e<Platform.Unknown&&(e=Platform.Unknown),e}}class ColorScheme{static fromObject(e){let t=new ColorScheme;return t.dark=Boolean(e.dark),t.primary=String(e.primary),t.secondary=String(e.secondary),t.accent=String(e.accent),t.error=String(e.errorColor),t}}class Component{static fromObject(e){let t=new Component;t.id=e.id,t.name=e.name,t.props=new Array;for(let r=0;r<e.props.length;r++){const n=e.props[r];t.props.push(n)}return t.template=String(e.template),t.css=e.css,t.js=e.js,t.verified=Boolean(e.verified),t}}class Page{static fromObject(e){let t=new Page;t.id=e.id,t.components=new Array;for(let r=0;r<e.components.length;r++){const n=e.components[r];t.components.push(Component.fromObject(n))}t.children=new Array;for(let r=0;r<e.children.length;r++){const n=e.children[r];t.children.push(Page.fromObject(n))}return t.pathUnit=e.pathUnit,t.propName=e.propName,t.template=e.template,t.css=e.css,t}hasProp(){return null!=this.propName}hasChildren(){return this.children.length>0}}class SimplifiedTemplate{static fromObject(e){let t=new Template;return t.id=e.id,t.name=e.name,t.parent=null!=e.template?SimplifiedTemplate.fromObject(e.parent):null,t.colorScheme=ColorScheme.fromObject(e.colorScheme),t.price=e.price,t.bundled=Boolean(e.bundled),t}}class Template{static fromObject(e){let t=new Template;return t.id=e.id,t.name=e.name,t.parent=null!=e.parent?SimplifiedTemplate.fromObject(e.parent):null,t.colorScheme=ColorScheme.fromObject(e.colorScheme),t.template=e.template,t.css=e.css,t.price=e.price,t.bundled=Boolean(e.bundled),t}}class Website extends Network{constructor(e,t,r,n){super(e,t,r,n)}}class WebsiteRepresentation{static fromObject(e){let t=new WebsiteRepresentation;t.pages=new Array;for(let r=0;r<e.pages.length;r++){const n=e.pages[r];t.pages.push(Page.fromObject(n))}return t.template=Template.fromObject(e.template),t}}