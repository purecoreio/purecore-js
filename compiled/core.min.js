var Service,LineType,__awaiter=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{h(r.next(e))}catch(e){s(e)}}function a(e){try{h(r.throw(e))}catch(e){s(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}h((r=r.apply(e,t||[])).next())}))};class Core{constructor(e,t){this.onLoginEvent=new LiteEvent,this.onPaymentSuccessEvent=new LiteEvent,this.onPaymentFailureEvent=new LiteEvent,this.dev=null!=t&&t,null!=e&&("string"==typeof e?this.key=e:"object"==typeof e&&(this.session=e instanceof Session?e:new Session(new Core(this.session,this.dev)).fromObject(e)));try{void 0!==window&&this.addWindowListeners()}catch(e){}}get onLogin(){return this.onLoginEvent.expose()}get onPaymentSuccess(){return this.onPaymentSuccessEvent.expose()}get onPaymentFailure(){return this.onPaymentFailureEvent.expose()}addWindowListeners(){window.addEventListener("message",(e=>{if("https://api.purecore.io"===e.origin)switch(e.data.message){case"login":this.onLoginEvent.trigger(new LoginEvent(e.data.data));break;case"paymentSuccess":this.onPaymentSuccessEvent.trigger(new PaymentSuccessEvent);break;case"paymentFailure":this.onPaymentFailureEvent.trigger(new PaymentFailureEvent)}}),!1)}login(e){try{let t=600,i=400;const r=window.top.outerHeight/2+window.top.screenY-t/2,n=window.top.outerWidth/2+window.top.screenX-i/2;return window.open("https://api.purecore.io/login/"+e,"Login",`toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=${i}, height=${t}, top=${r}, left=${n}`)}catch(e){throw new Error("In order to create a login popup, you must be executing purecore from a Document Object Model")}}getCacheCollection(){return new CacheCollection(this.dev)}requestGlobalHash(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return yield new Call(this).commit({},"session/hash/list/").then((t=>{var i=new Array;return t.forEach((t=>{var r=new ConnectionHashGlobal(e);i.push(r.fromObject(t))})),i}))}))}getPlayersFromIds(e){var t=new Array;return e.forEach((e=>{t.push(new Player(this,e))})),t}getMachine(e){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(this).commit({hash:e},"machine").then((t=>new Machine(this,e).fromObject(t)))}))}fromToken(e){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(this).commit({token:e},"session/from/google").then((e=>{const t=new Session(this).fromObject(e);return this.session=t,t}))}))}asBillingAddress(e){return(new BillingAddress).fromObject(e)}getWorkbench(){return new Workbench}pushFCM(e){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(this).commit({token:e},"account/push/fcm").then((()=>!0))}))}getTool(){return null!=this.key&&null!=this.key?this.key:this.session}getCoreSession(){return this.session}getLegacyKey(){return new Key(this,"UNK",null,this.key,null)}getKey(){return null==this.key?null:this.key}getHostingManager(){return new HostingManager(this)}getElements(){return new Elements(this)}getInstance(e,t,i){return new Instance(this,e,t,i)}getCore(){return this}fromDiscord(e,t,i){return __awaiter(this,void 0,void 0,(function*(){let r={guildid:e,token:t};return i&&(r.devkey=!0),yield new Call(this).commit(r,"key/from/discord").then((e=>(this.key=e.hash,this)))}))}}try{module.exports=Core;const e=require("node-fetch");global.fetch||(global.fetch=e)}catch(e){console.log("[corejs] starting plain vanilla instance, as nodejs exports were not available")}class Analytic{constructor(e,t,i){this.timestamp=e,this.original=t,this.fields=i}getTimestamp(){return this.timestamp}getOriginal(){return this.original}getFields(e=!1){var t=new Array;return e?this.fields.forEach((e=>{e.getName().includes("%")&&t.push(e)})):this.fields.forEach((e=>{e.getName().includes("%")||t.push(e)})),t}setFields(e){this.fields=e}}class AnalyticField{constructor(e,t,i){this.value=e,this.name=t,this.technicalName=i}getTechnicalName(){return this.technicalName}getName(){return this.name}getValue(){return this.value}}class AnalyticGroup{constructor(e,t){this.key=e,this.value=t}fromObject(e){return this.key=e.key,this.value=e.value,this}}class AnalyticGroupBase{constructor(e,t){this.groupSize=e,this.values=t}fromObject(e){this.groupSize=e.groupSize;var t=new Array;return e.values.forEach((e=>{t.push((new AnalyticGroup).fromObject(e))})),this.values=t,this}toApexHeatmap(){let e=[],t=[];return this.values.forEach((i=>{t.push({x:i.key,y:i.value}),t.length>=this.groupSize?(e.push({name:(e.length+1).toString(),data:t}),t=[]):e.length*this.groupSize+t.length==this.values.length&&e.push({name:(e.length+1).toString(),data:t})})),e}}class GrowthAnalytic{constructor(e=null,t=null,i=0,r=0,n=0,s=0,o=0,a=0,h=0){this.uuid=e,this.instance=t,this.newPlayers=i,this.activePlayers=r,this.inactivePlayers=n,this.newPlayersRelative=s,this.activePlayersRelative=o,this.inactivePlayersRelative=a,this.timestamp=h}getLegacy(){return new Analytic(this.timestamp,this,this.getFields())}fromObject(e){return this.uuid=null,this.instance=null,this.newPlayers=e.newPlayers,this.activePlayers=e.activePlayers,this.inactivePlayers=e.inactivePlayers,this.newPlayersRelative=e.newPlayersRelative,this.activePlayersRelative=e.activePlayersRelative,this.inactivePlayersRelative=e.inactivePlayersRelative,this.timestamp=1e3*e.timestamp,this}getFields(){var e=new Array;return e.push(new AnalyticField(this.newPlayers,"New Players","newPlayers")),e.push(new AnalyticField(this.activePlayers,"Active Players","activePlayers")),e.push(new AnalyticField(this.inactivePlayers,"Inactive Players","inactivePlayers")),e.push(new AnalyticField((100*this.newPlayersRelative).toFixed(2),"New Players %","newPlayersRelative")),e.push(new AnalyticField((100*this.activePlayersRelative).toFixed(2),"Active Players %","activePlayersRelative")),e.push(new AnalyticField((100*this.inactivePlayersRelative).toFixed(2),"Inactive Players %","inactivePlayersRelative")),e}}class IncomeAnalytic{constructor(e=null,t=null,i=0,r=0,n=0,s=0,o=0){this.uuid=e,this.store=t,this.finalIncome=i,this.payments=r,this.potentialIncome=n,this.paymentRequests=s,this.timestamp=1e3*o}getLegacy(){return new Analytic(this.timestamp,this,this.getFields())}fromObject(e){return this.uuid=e.uuid,this.store=null,this.finalIncome=e.finalIncome,this.payments=e.payments,this.potentialIncome=e.potentialIncome,this.paymentRequests=e.paymentRequests,this.timestamp=1e3*e.timestamp,this}getFields(){var e=new Array;return e.push(new AnalyticField(this.finalIncome,"Income","income")),e.push(new AnalyticField(this.payments,"Payment Count","paymentCount")),e.push(new AnalyticField(this.potentialIncome,"Potential Income","potentialIncome")),e.push(new AnalyticField(this.paymentRequests,"Potential Payment Count","potentialPaymentCount")),e}}class VoteAnalytic{constructor(e=null,t=null,i=0,r=0,n=0){this.uuid=e,this.network=t,this.voteCount=i,this.voterCount=r,this.timestamp=1e3*n}fromObject(e){return this.uuid=e.uuid,this.network=null,this.voteCount=e.voteCount,this.voterCount=e.voterCount,this.timestamp=1e3*e.timestamp,this}getLegacy(){return new Analytic(this.timestamp,this,this.getFields())}getFields(){var e=new Array;return e.push(new AnalyticField(this.voteCount,"Vote count","voteCount")),e.push(new AnalyticField(this.voterCount,"Voter count","voterCount")),e}}class Workbench{arrayToLegacy(e){var t=new Array;return e.forEach((e=>{var i=e.getLegacy();t.push(i)})),t}stack(e=new Array,t=0){var i=new Array,r=null,n=null;return e.forEach((e=>{if(null==r)r=e.getTimestamp(),n=e;else if(e.getTimestamp()-r>=t)i.push(n),n=e,r=e.getTimestamp();else if(n.getOriginal()instanceof VoteAnalytic||n.getOriginal()instanceof IncomeAnalytic){var s=n.getFields(),o=new Array;s.forEach((t=>{e.getFields().forEach((e=>{if(t.getTechnicalName()==e.getTechnicalName()){var i=new AnalyticField(t.value+e.value,t.name,t.technicalName);o.push(i)}}))})),n.setFields(o)}else if(n.getOriginal()instanceof GrowthAnalytic){s=n.getFields(),o=new Array;s.forEach((t=>{e.getFields().forEach((e=>{if(t.getTechnicalName()==e.getTechnicalName()){var i=new AnalyticField(t.value,t.name,t.technicalName);o.push(i)}}))})),n.setFields(o)}})),i.includes(n)||i.push(n),i}toApexSeries(e,t=!1){var i=[];e.forEach((e=>{var r=e.getTimestamp();e.getFields(t).forEach((e=>{e.getTechnicalName()in i||(i[e.getTechnicalName()]={},i[e.getTechnicalName()].values=[],i[e.getTechnicalName()].name=e.getName()),i[e.getTechnicalName()].values.push({x:r,y:e.getValue()})}))}));var r=[];for(const e in i)if(i.hasOwnProperty(e)){const t=i[e];var n={name:t.name,data:t.values};r.push(n)}return r}}class PayPalSubscription{constructor(e,t){this.url=e,this.id=t}getURL(){return this.url}getID(){return this.id}}class BillingPreview{constructor(e,t,i){this.now=e,this.days=t,this.monthly=i}fromObject(e){return this.now=e.now,this.days=e.days,this.monthly=e.monthly,this}}class StripeSubscription{constructor(e){this.id=e}getID(){return this.id}}class CacheCollection{constructor(e,t,i,r){this.onCommandEvent=new LiteEvent,this.onCommandsLoadingEvent=new LiteEvent,this.onCommandsLoadedEvent=new LiteEvent,this.dev=null!=e&&e,this.instanceCaches=null!=t?t:new Array,this.uuidAssociation=null!=i?i:{},this.socketAssociation=null!=r?r:{},this.executions=new Array,this.loadingExecutions=new Array,this.loadedExecutions=new Array,this.executors={}}get onCommand(){return this.onCommandEvent.expose()}get onCommandsLoading(){return this.onCommandsLoadingEvent.expose()}get onCommandsLoaded(){return this.onCommandsLoadedEvent.expose()}disconnect(e){null!=this.getCacheBySocket(e)&&this.removeCache(this.getCacheBySocket(e).createdOn.getTime())}getExecutors(e){var t=new Array;return e.uuid in t&&t[e.uuid].forEach((e=>{t.push(e)})),t}connect(e,t){return __awaiter(this,void 0,void 0,(function*(){let i=this;var r=new Core(t,this.dev);return yield r.getLegacyKey().update().then((function(t){var n=new InstanceCache(r,t.instance);return i.socketAssociation[e]=n.createdOn.getTime(),n.instance.uuid in i.uuidAssociation||(i.uuidAssociation[n.instance.uuid]=[]),i.uuidAssociation[n.instance.uuid].push(n.createdOn.getTime()),i.instanceCaches.push(n),!0}))}))}removeCache(e){var t=this.getCacheByEpoch(e);t.flush();var i=[];for(const t in this.socketAssociation)if(this.socketAssociation.hasOwnProperty(t)){this.socketAssociation[t].createdOn==e&&i.push(t)}i.forEach((e=>{t.instance.uuid in this.executors&&(this.executors[t.instance.uuid].length>1?this.executors[t.instance.uuid].splice(this.executors[t.instance.uuid].indexOf(e),1):delete this.executors[t.instance.uuid]),delete this.socketAssociation[e]}));var r=this.uuidAssociation[t.instance.uuid].filter((function(t){return t!==e}));0==r.length?delete this.uuidAssociation[t.instance.uuid]:this.uuidAssociation[t.instance.uuid]=r,this.instanceCaches.splice(this.instanceCaches.indexOf(t),1)}setExecutor(e){let t=this.getCacheBySocket(e);null!=t&&(t.instance.uuid in this.executors?this.executors[t.instance.uuid].push(e):(this.executors[t.instance.uuid]=[e],this.sendCommandBatch(this.executions,e),this.loadExecutions(t.instance,"offline",0)))}loadExecutions(e,t,i,r){null==r&&(r=new Array);let n="offline"==t&&0==i&&-1===this.loadingExecutions.indexOf(e)&&-1===this.loadedExecutions.indexOf(e),s="offline"==t&&i>0||"offline"!=t;n&&this.onCommandsLoadingEvent.trigger(),(n||s)&&(n&&(this.loadingExecutions.forEach((e=>{r.includes(e)||r.push(e)})),this.loadedExecutions.forEach((e=>{r.includes(e)||r.push(e)})),this.loadingExecutions.push(e)),e.getPendingExecutions(t,i,r).then((n=>{n.forEach((e=>{this.executions.includes(e)||this.executions.push(e)})),this.sendCommandBatch(n),n.length>=20?this.loadExecutions(e,t,i+1,r):"offline"==t?this.loadExecutions(e,"online",0,r):(this.loadingExecutions.splice(this.loadingExecutions.indexOf(e),1),this.loadedExecutions.push(e),this.onCommandsLoadedEvent.trigger())})))}getCacheByEpoch(e){var t=null;return this.instanceCaches.forEach((i=>{i.createdOn.getTime()==e&&(t=i)})),t}getCacheBySocket(e){return this.getCacheByEpoch(this.socketAssociation[e])}getCachesByInstance(e){var t=new Array;return e.uuid in this.uuidAssociation&&this.uuidAssociation[e.uuid].forEach((e=>{var i=this.getCacheByEpoch(e);null!=i&&t.push(i)})),t}sendCommandBatch(e,t){let i={};for(var r in e.forEach((e=>{let t=[];e.executedOn.forEach((e=>{t.push(e.uuid)})),e.instances.forEach((r=>{!t.includes(r.uuid)&&this.getCachesByInstance(r).length>0&&(r.uuid in i||(i[r.uuid]=new Array),i[r.uuid].push(e))}))})),i)if(i.hasOwnProperty(r)){var n=i[r];r in this.executors&&this.executors[r].forEach((e=>{(null!=t&&e==t||null==t)&&this.onCommandEvent.trigger(new CommandEvent(e,n))}))}}}class CommandEvent{constructor(e,t){this.socketId=e,this.commands=t}}class InstanceCache extends Core{constructor(e,t,i=!1,r,n,s,o){super(e.getTool());var a=t;a.core=e,this.instance=a,this.consoleLines=null!=r?r:new Array,this.instanceVitals=null!=n?n:new Array,this.connections=null!=s?s:new Array,this.createdOn=null!=o?o:new Date,i||this.update()}createLine(e){new ConsoleLine(new Date,LineType.INFO,e)}connectPlayer(e,t,i){return __awaiter(this,void 0,void 0,(function*(){let r=this;var n=new Player(this.instance.core,null,i,t);return yield n.openConnection(e,this.instance).then((function(e){return r.pushConnection(e),e}))}))}disconnectPlayer(e,t){return __awaiter(this,void 0,void 0,(function*(){let i=this;var r=new Player(this.instance.core,null,t,e,!1);return yield r.closeConnections(this.instance).then((function(e){var t=new Array;return i.connections.forEach((i=>{var r=!1;e.forEach((e=>{i.uuid==e.uuid&&(r=!0)})),r||t.push(i)})),i.connections=t,e}))}))}pushConnection(e){this.connections.push(e)}pushLine(e){this.consoleLines.push(e)}pushVital(e){this.instanceVitals.push(e)}update(){return __awaiter(this,void 0,void 0,(function*(){}))}flush(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return yield this.instance.closeOpenConnections().then((function(){e.connections=new Array,e.consoleLines=new Array,e.instanceVitals=new Array}))}))}}class Call extends Core{constructor(e){super(e.getTool(),e.dev),this.core=e,this.baseURL="https://api.purecore.io/rest/2"}commit(e,t,i){return __awaiter(this,void 0,void 0,(function*(){null==e&&(e={}),null==i&&(i={method:"POST"}),null!=this.core.getCoreSession()&&null==e.hash?e.hash=this.core.getCoreSession().getHash():null!=this.core.getKey()&&(e.key=this.core.getKey());const r=this.baseURL+Call.formatEndpoint(t)+"?"+Object.keys(e).filter((t=>e.hasOwnProperty(t))).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&");if(this.core.dev){var n=e;null!=e.key&&(n.key="***"),null!=e.hash&&(n.hash="***"),console.log(this.baseURL+Call.formatEndpoint(t),n)}return new Promise(((e,t)=>fetch(r,i).then((e=>e.json())).then((t=>{if("error"in t)throw new Error(t.error+". "+t.msg);e(t)})).catch((e=>t(e)))))}))}static formatEndpoint(e){return(e.startsWith("/")?"":"/")+e+(e.endsWith("/")?"":"/")}}class Command extends Core{constructor(e,t,i,r){super(e.getTool,e.dev),this.core=e,this.uuid=t,this.cmd=i,this.network=r}fromObject(e){return this.uuid=e.cmdId,this.cmd=e.cmdString,this.network=new Network(this.core).fromObject(e.network),this}}class CommandContext extends Core{constructor(e,t,i,r,n,s,o,a,h){super(e.getTool(),e.dev),this.core=e,this.player=t,this.legacyUsername=i,this.legacyUuid=r,this.originType=n,this.originName=s,this.originId=o,this.causedBy=a,this.quantity=h}fromObject(e){return this.player=null,null!=e.player&&(this.player=new Player(this.core).fromObject(e.player)),this.legacyUsername=e.legacyUsername,this.legacyUuid=e.legacyUuid,this.originType=e.originType,this.originName=e.originName,this.originId=e.originId,this.causedBy=e.causedBy,this.quantity=e.quantity,this}}class Execution extends Core{constructor(e,t,i,r,n,s,o,a,h){super(e.getTool(),e.dev),this.core=e,this.uuid=t,this.network=i,this.command=r,this.commandContext=n,this.instances=s,this.needsOnline=o,this.executedOn=a,this.executed=h}fromObject(e){return this.uuid=e.uuid,this.network=new Network(this.core).fromObject(e.network),this.command=new Command(this.core).fromObject(e.command),this.commandContext=new CommandContext(this.core).fromObject(e.commandContext),this.instances=new Array,Array.isArray(e.instances)&&e.instances.forEach((e=>{this.instances.push(new Instance(this.core,e,null,null))})),this.needsOnline=e.needsOnline,this.executedOn=new Array,Array.isArray(e.executedOn)&&e.executedOn.forEach((e=>{this.executedOn.push(new Instance(this.core,e,null,null))})),this.executed=e.executed,this}}class ActivityMatch{constructor(e,t,i,r){this.startedOn=e,this.finishedOn=t,this.activity=i,this.matchList=r}getStart(){return this.startedOn}getFinish(){return this.finishedOn}getMatchList(){return this.matchList}}class Connection extends Core{constructor(e,t,i,r,n,s){super(e.getTool()),this.core=e,this.player=t,this.instance=i,this.location=r,this.status=n,this.uuid=s}fromObject(e){return this.player=new Player(this.core,e.player.coreid,e.player.username,e.player.uuid,e.player.verified),this.instance=new Instance(this.core,e.instance.uuid,e.instance.name,e.instance.type),this.location=(new ConnectionLocation).fromObject(e.location),this.status=(new ConnectionStatus).fromObject(e.status),this.uuid=e.uuid,this}getStatus(){return this.status}getInstance(){return this.instance}}class ConnectionHash extends Core{constructor(e,t,i,r,n){super(e.getKey()),this.core=e,this.network=t,this.uuid=i,this.hash=r,this.player=n}fromObject(e){return this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.uuid=e.uuid,this.hash=e.hash,this.player=new Player(this.core,e.player.coreid,e.player.username,e.player.uuid,e.player.verified),this}getPlayer(){return this.player}getHash(){return this.hash}getNetwork(){return this.network}requestSession(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({hash:this.hash},"session/hash/token/").then((t=>{var i=new Player(e.core,t.player.coreid,t.player.username,t.player.uuid,t.player.verified),r=new Network(e.core,new Instance(e.core,t.network.uuid,t.network.name,"NTW"));return new SessionRequest(e.core,t.uuid,t.token,t.validated,i,r,"player")}))}))}}class ConnectionHashGlobal extends Core{constructor(e,t,i){super(e.getKey()),this.core=e,this.hash=t,this.player=i}fromObject(e){return this.hash=e.hash,this.player=new Player(this.core,e.player.coreid,e.player.username,e.player.uuid,e.player.verified),this}getPlayer(){return this.player}getHash(){return this.hash}requestSession(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({hash:this.hash},"session/hash/token/").then((t=>{var i=new Player(e.core,t.player.coreid,t.player.username,t.player.uuid,t.player.verified);if(null!=e.core.getTool()){var r=new Network(e.core,new Instance(e.core,t.network.uuid,t.network.name,"NTW"));return new SessionRequest(e.core,t.uuid,t.token,t.validated,i,r,"player")}return new SessionRequest(e.core,t.uuid,t.token,t.validated,i,null,"masterplayer")}))}))}}class ConnectionLocation{constructor(e,t,i,r,n){this.city=e,this.region=t,this.country=i,this.lat=r,this.long=n}fromObject(e){return this.city=e.city,this.region=e.region,this.country=e.country,this.lat=e.lat,this.long=e.long,this}}class ConnectionStatus{constructor(e,t){this.openedOn=e,this.closedOn=t}fromObject(e){return this.openedOn=new Date(1e3*e.openedOn),this.closedOn=new Date(1e3*e.closedOn),this}getOpenedOn(){return this.openedOn}isActive(){return null==this.closedOn||null==this.closedOn}isClosed(){return!this.isActive()}getClosedOn(){return this.closedOn}}class MatchingRange{constructor(e,t,i){this.startedOn=e,this.finishedOn=t,this.matchWith=i}getStart(){return this.startedOn}getFinish(){return this.finishedOn}getMatchWith(){return this.matchWith}}!function(e){e[e.MINECRAFT=0]="MINECRAFT"}(Service||(Service={}));class InstanceConsole{}class ConsoleLine{constructor(e,t,i){this.date=e,this.type=t,this.message=i}}!function(e){e[e.INFO=0]="INFO",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(LineType||(LineType={}));class DiscordGuild{constructor(e,t,i,r){this.network=e,this.name=t,this.uuid=i,this.memberCount=r}fromObject(e){return this.name=e.name,this.uuid=e.uuid,this.memberCount=e.memberCount,this}}class CheckoutElement extends Core{constructor(e,t,i){super(e.getKey()),this.core=e,this.products=t,document.addEventListener("paymentSuccess",i)}getJSON(){var e=new Array;return this.products.forEach((t=>{e.push(t.getId())})),JSON.stringify(e)}loadInto(e){this.core.getKey(),this.getJSON()}}class Elements extends Core{constructor(e){super(e.getKey()),this.core=e}getCheckoutElement(e,t){return new CheckoutElement(this.core,e,t)}}class LiteEvent{constructor(){this.handlers=[]}on(e){this.handlers.push(e)}off(e){this.handlers=this.handlers.filter((t=>t!==e))}trigger(e){this.handlers.slice(0).forEach((t=>t(e)))}expose(){return this}}class LoginEvent{constructor(e){this.session=e}}class PaymentFailureEvent{constructor(){}}class PaymentSuccessEvent{constructor(){}}class ForumCategory extends Core{constructor(e,t,i,r,n,s){super(e.getTool()),this.core=e,this.uuid=t,this.name=i,this.description=r,this.network=n,this.section=s}fromObject(e){return this.uuid=e.uuid,this.name=e.name,this.description=e.description,this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.section=new ForumSection(this.core).fromObject(e.section),this}getPosts(e=0){return __awaiter(this,void 0,void 0,(function*(){null!=e&&null!=e||(e=0);let t=this;return new Call(this.core).commit({category:this.uuid,page:e.toString()},"forum/get/post/list/").then((e=>{var i=new Array;return e.forEach((e=>{i.push(new ForumPost(t.network.core).fromObject(e))})),i}))}))}createPost(e,t){return __awaiter(this,void 0,void 0,(function*(){let i=this;return new Call(this.core).commit({category:this.uuid,title:e,content:escape(t)},"forum/create/post/").then((e=>new ForumPost(i.core).fromObject(e)))}))}}class Forum{constructor(e){this.network=e}getSections(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.network.core).commit({network:this.network.uuid},"forum/get/section/list/").then((t=>{var i=new Array;return t.forEach((t=>{i.push(new ForumSection(e.network.core).fromObject(t))})),i}))}))}getCategory(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.network.core).commit({category:e},"forum/get/category/").then((e=>new ForumCategory(t.network.core).fromObject(e)))}))}getPost(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.network.core).commit({post:e},"forum/get/post/").then((e=>new ForumPost(t.network.core).fromObject(e)))}))}createSection(e,t){return __awaiter(this,void 0,void 0,(function*(){let i=this;return new Call(this.network.core).commit({network:this.network.uuid,name:e,description:t},"forum/create/section/").then((e=>new ForumSection(i.network.core).fromObject(e)))}))}}class ForumPost extends Core{constructor(e,t,i,r,n,s,o,a){super(e.getTool()),this.core=e,this.uuid=t,this.title=i,this.content=r,this.player=n,this.open=s,this.network=o,this.category=a}fromObject(e){return this.uuid=e.uuid,this.title=e.title,this.content=e.content,this.player=new Player(this.core,e.player.coreid,e.player.username,e.player.uuid,e.player.verified),this.open=e.open,this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.category=new ForumCategory(this.core).fromObject(e.category),this}createReply(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.core).commit({object:this.uuid,content:escape(e)},"forum/create/reply/").then((e=>new ForumReply(t.core).fromObject(e)))}))}getReplies(e=0){return __awaiter(this,void 0,void 0,(function*(){null!=e&&null!=e||(e=0);let t=this;return new Call(this.core).commit({object:this.uuid,page:e.toString()},"forum/get/reply/list/").then((e=>{var i=new Array;return e.forEach((e=>{i.push(new ForumReply(t.core).fromObject(e))})),i}))}))}}class ForumReply extends Core{constructor(e,t,i,r,n,s){super(e.getTool()),this.core=e,this.uuid=t,this.content=i,this.player=r,this.network=n,this.replyingTo=s}fromObject(e){return this.uuid=e.uuid,this.content=e.content,this.player=new Player(this.core,e.player.coreid,e.player.username,e.player.uuid,e.player.verified),this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),"title"in e.responseTo?this.replyingTo=new ForumPost(this.core).fromObject(e.responseTo):this.replyingTo=new ForumReply(this.core).fromObject(e.responseTo),this}createReply(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.core).commit({object:this.uuid,content:escape(e)},"forum/create/reply/").then((e=>new ForumReply(t.core).fromObject(e)))}))}getReplies(e=0){return __awaiter(this,void 0,void 0,(function*(){null!=e&&null!=e||(e=0);let t=this;return new Call(this.core).commit({object:this.uuid,page:e.toString()},"forum/get/reply/list/").then((e=>{var i=new Array;return e.forEach((e=>{i.push(new ForumReply(t.core).fromObject(e))})),i}))}))}}class ForumSection extends Core{constructor(e,t,i,r,n){super(e.getTool()),this.core=e,this.uuid=t,this.name=i,this.description=r,this.network=n}getCategories(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({section:this.uuid},"forum/get/category/list/").then((t=>{var i=new Array;return t.forEach((t=>{i.push(new ForumCategory(e.core).fromObject(t))})),i}))}))}fromObject(e){return this.uuid=e.uuid,this.name=e.name,this.description=e.description,this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this}createCategory(e,t){return __awaiter(this,void 0,void 0,(function*(){let i=this;return new Call(this.network.core).commit({section:this.uuid,name:e,description:t},"forum/create/category/").then((e=>new ForumCategory(i.core).fromObject(e)))}))}}class Host extends Core{constructor(e,t,i,r,n,s,o,a,h,c,u){super(e.getTool(),e.dev),this.core=e,this.uuid=t,this.instance=i,this.machine=r,this.owner=n,this.createdOn=s,this.disabledOn=o,this.template=a,this.port=h,this.additionalPorts=c,this.image=u}fromObject(e){this.uuid=e.uuid,this.instance=new Instance(this.core).fromObject(e.instance),this.machine=new Machine(this.core).fromObject(e.machine),this.owner=new Owner(this.core,e.owner.id,e.owner.name,e.owner.surname,e.owner.email),this.createdOn=e.createdOn,this.disabledOn=e.disabledOn,this.template=new HostingTemplate(this.core).fromObject(e.template),this.port=e.port;let t=new Array;return e.additionalPorts.forEach((e=>{t.push(e)})),this.additionalPorts=t,this.image=e.image,this}}class HostAuth extends Core{constructor(e,t,i){super(e.getTool(),e.dev),this.core=e,this.hash=t,this.host=i}fromObject(e){return this.hash=e.hash,this.host=new Host(this.core).fromObject(e.host),this}}class HostingAvailability extends Core{constructor(e,t,i,r){super(e.getTool(),e.dev),this.core=e,this.template=t,this.machine=i,this.count=r}fromObject(e){return this.template=new HostingTemplate(this.core).fromObject(e.template),this.machine=new Machine(this.core).fromObject(e.machine),this.count=e.count,this}use(e,t){return __awaiter(this,void 0,void 0,(function*(){return this.template.use(e,t,this.machine)}))}}class HostingManager extends Core{constructor(e){super(e.getTool(),e.dev),this.core=e}getRecommended(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return yield new Call(this.core).commit({countries:Array.isArray(e)?JSON.stringify(e):JSON.stringify([])},"hosting/recommended/").then((function(e){let i=new Array;return e.forEach((e=>{i.push(new HostingAvailability(t.core).fromObject(e))})),i}))}))}preview(e){return __awaiter(this,void 0,void 0,(function*(){return"string"==typeof e&&(e=new HostingTemplate(this.core).fromId(e,!1)),yield new Call(this.core).commit({template:e.uuid},"hosting/template/use/preview/").then((function(e){return(new BillingPreview).fromObject(e)}))}))}getHost(){return new Host(this.core)}getHostAuth(){return new HostAuth(this.core)}getTemplate(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return yield new Call(this.core).commit({template:e},"hosting/template/get/").then((function(e){return new HostingTemplate(t.core).fromObject(e)}))}))}getMachineFromId(e){return new Machine(this.core,null,null,null,null,null,null,null,null,null,e)}}class HostingTemplate extends Core{constructor(e){super(e.getTool(),e.dev),this.core=e}fromId(e,t){return this.uuid=e,this}fromObject(e){return this.owner=new Owner(this.core,e.owner.id,e.owner.name,e.owner.surname,e.owner.email),this.uuid=e.uuid,this.supportedImages=e.supportedImages,this.memory=e.memory,this.size=e.size,this.cores=e.cores,this.price=e.price,this}addTo(e){return __awaiter(this,void 0,void 0,(function*(){let t=this.core;return yield new Call(this.core).commit({machine:e.uuid,template:this.uuid},"hosting/template/add/").then((function(e){return new Machine(t).fromObject(e)}))}))}use(e,t,i){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(this.core).commit({machine:i.uuid,template:this.uuid,instance:e.uuid,image:t},"hosting/template/use/").then((function(e){return(new BillingPreview).fromObject(e)}))}))}}class Instance extends Core{constructor(e,t,i,r){super(e.getTool()),this.core=e,this.uuid=t,this.name=i,this.type=r}fromObject(e){return this.uuid=e.uuid,this.name=e.name,this.type=e.type,this}closeOpenConnections(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({instance:this.uuid},"instance/connections/close/all/").then((t=>{var i=new Array;return t.forEach((t=>{var r=new Connection(e.core).fromObject(t);i.push(r)})),i}))}))}getOpenConnections(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({instance:this.uuid},"instance/connections/open/list/").then((t=>{var i=new Array;return t.forEach((t=>{var r=new Connection(e.core).fromObject(t);i.push(r)})),i}))}))}getGrowthAnalytics(e=86400){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({instance:this.uuid,span:e},"instance/growth/analytics/").then((e=>{var t=new Array;return e.forEach((e=>{var i=(new GrowthAnalytic).fromObject(e);t.push(i)})),t}))}))}delete(){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({instance:this.uuid},"instance/delete/").then((()=>!0))}))}getKeys(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({instance:this.uuid},"instance/key/list/").then((t=>{var i=new Array;return t.forEach((t=>{i.push(new Key(e.core).fromObject(t))})),i}))}))}getName(){return this.name}getId(){return this.uuid}asServer(){return new Server(this.core,this.uuid,null,this.name,null)}asNetwork(){return new Network(this.core,this)}getPendingExecutions(e,t,i){return __awaiter(this,void 0,void 0,(function*(){null==t&&(t=0),null==e&&(e="any"),null==i&&(i=new Array);let r=new Array;i.forEach((e=>{r.push(e.uuid)}));var n={};return n=r.length>0?{instance:this.uuid,page:t.toString(),type:e,excluded:JSON.stringify(r)}:{instance:this.uuid,page:t.toString(),type:e},new Call(this.core).commit(n,"cmds/get/pending/").then((e=>{let t=new Array;return e.forEach((e=>{t.push(new Execution(this.core).fromObject(e))})),t}))}))}getHost(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({instance:this.uuid},"instance/get/host/").then((t=>new Host(e.core).fromObject(t)))}))}getHostAuth(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({instance:this.uuid},"instance/get/host/auth/").then((t=>new HostAuth(e.core).fromObject(t)))}))}update(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({instance:this.uuid},"instance/info/").then((t=>(null==t.server?(e.type="NTW",e.uuid=t.network.uuid,e.name=t.network.name):(e.type="SVR",e.uuid=t.server.uuid,e.name=t.server.name),e)))}))}}class InstanceVital{}class Network extends Core{constructor(e,t){super(e.getTool()),this.core=e,null!=t&&(this.uuid=t.getId(),this.name=t.getName())}fromObject(e){return this.uuid=e.uuid,this.name=e.name,this}createServerGroup(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.core).commit({name:e,network:this.uuid},"instance/server/group/create/").then((e=>new ServerGroup(t.core).fromObject(e)))}))}getGroups(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({network:this.uuid},"instance/server/group/list/").then((t=>{let i=new Array;return t.forEach((t=>{i.push(new ServerGroup(e.core).fromObject(t))})),i}))}))}getGroupLists(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({network:this.uuid},"instance/server/group/list/servers/").then((t=>{let i=new Array;return t.forEach((t=>{i.push(new ServerGroupList(e.core).fromObject(t))})),i}))}))}getStore(){return new Store(this)}getForum(){return new Forum(this)}getId(){return this.uuid}getVoteHeatmap(e){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({network:this.uuid,group:e},"instance/network/voting/analytics/group").then((e=>(new AnalyticGroupBase).fromObject(e)))}))}getDevKey(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({network:this.uuid},"key/get/dev/").then((t=>new Key(e.core).fromObject(t)))}))}getKeyFromId(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.core).commit({keyid:e},"key/from/id/").then((e=>new Key(t.core).fromObject(e)))}))}createServer(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.core).commit({name:e,network:this.uuid},"instance/server/create/").then((e=>new Instance(t.core,e.uuid,e.name,"SVR")))}))}getServers(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({network:this.uuid},"instance/server/list/").then((t=>{var i=new Array;return t.forEach((t=>{i.push(new Instance(e.core,t.uuid,t.name,"SVR"))})),i}))}))}asInstance(){return new Instance(this.core,this.uuid,this.name,"NTW")}getVotingAnalytics(e=86400){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({network:this.uuid,span:e},"instance/network/voting/analytics/").then((e=>{var t=new Array;return e.forEach((e=>{var i=(new VoteAnalytic).fromObject(e);t.push(i)})),t}))}))}getVotingSites(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({network:this.uuid},"instance/network/voting/site/list/").then((t=>{var i=new Array;return t.forEach((t=>{var r=new VotingSite(e.core).fromObject(t);i.push(r)})),i}))}))}getSetupVotingSites(e=!0){return __awaiter(this,void 0,void 0,(function*(){let t=this;var i;return i=e?"instance/network/voting/site/list/setup/config/":"instance/network/voting/site/list/setup/",new Call(this.core).commit({network:this.uuid},i).then((i=>{if(e){var r=new Array;return i.forEach((e=>{var i=new VotingSiteConfig(t.core).fromObject(e);r.push(i)})),r}var n=new Array;return i.forEach((e=>{var i=new VotingSite(t.core).fromObject(e);n.push(i)})),n}))}))}getGuild(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({network:this.uuid},"instance/network/discord/get/guild/").then((t=>new DiscordGuild(e).fromObject(t)))}))}setGuild(e){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({guildid:e},"/instance/network/discord/setguild/").then((()=>!0))}))}setSessionChannel(e){return __awaiter(this,void 0,void 0,(function*(){this.core.getKey();return new Call(this.core).commit({channelid:e},"instance/network/discord/setchannel/session/").then((()=>!0))}))}setDonationChannel(e){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({channelid:e},"instance/network/discord/setchannel/donation/").then((()=>!0))}))}getHashes(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({},"session/hash/list/").then((t=>{var i=new Array;return t.forEach((t=>{var r=new ConnectionHash(e.core);i.push(r.fromObject(t))})),i}))}))}getOffences(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({network:this.uuid},"punishment/offence/list/").then((t=>{var i=new Array;return t.forEach((t=>{var r=new Offence(e.core);i.push(r.fromObject(t))})),i}))}))}getOffenceActions(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({network:this.uuid},"punishment/action/list/").then((t=>{var i=new Array;return t.forEach((t=>{var r=new OffenceAction(e.core);i.push(r.fromObject(t))})),i}))}))}searchPlayers(e,t,i){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.core).commit({network:this.uuid,username:e},"player/from/minecraft/username/search/").then((e=>{var i=new Array;return e.forEach((e=>{var r=new Player(t.core,e.coreid,e.username,e.uuid,e.verified);i.push(r)})),i}))}))}getPlayer(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.core).commit({player:e},"player/from/core/id/").then((e=>new Player(t.core,e.coreid,e.username,e.uuid,e.verified)))}))}getPlayers(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;var i=0;return null!=e&&null!=e&&(i=e),new Call(this.core).commit({network:this.uuid,page:i},"instance/network/list/players/").then((e=>{var i=new Array;return e.forEach((e=>{var r=new Player(t.core,e.coreid,e.username,e.uuid,e.verified);i.push(r)})),i}))}))}getPunishments(e=0){return __awaiter(this,void 0,void 0,(function*(){let t=this;var i=0;return null!=e&&null!=e&&(i=e),new Call(this.core).commit({network:this.uuid,page:i},"punishment/list/").then((e=>{var i=new Array;return e.forEach((e=>{var r=new Punishment(t.core);i.push(r.fromObject(e))})),i}))}))}}class Server extends Core{constructor(e,t,i,r,n){super(e.getTool(),e.dev),this.core=e,this.uuid=t,this.network=i,this.name=r,this.group=n}fromObject(e){return this.uuid=e.uuid,this.network=new Network(this.core).fromObject(e.network),this.name=e.name,null==e.group?this.group=null:this.group=new ServerGroup(this.core).fromObject(e.group),this}addToGroup(e){return __awaiter(this,void 0,void 0,(function*(){let t=this,i=null;return i=String(e instanceof ServerGroup?e.uuid:e),new Call(this.core).commit({server:this.uuid,group:i},"instance/server/add/to/group/").then((e=>(t.group=new ServerGroup(t.core).fromObject(e.group),new Server(t.core).fromObject(e))))}))}ungroup(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return new Call(this.core).commit({server:this.uuid},"instance/server/ungroup/").then((t=>(e.group=null,new Server(e.core).fromObject(t))))}))}asInstance(){return new Instance(this.core,this.uuid,this.name,"SVR")}}class ServerGroup extends Core{constructor(e,t,i,r){super(e.getTool(),e.dev),this.uuid=t,this.core=e,this.network=i,this.name=r}fromObject(e){return this.uuid=e.uuid,this.network=new Network(this.core).fromObject(e.network),this.name=e.name,this}delete(){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({group:this.uuid},"instance/server/group/delete/").then((()=>!0))}))}}class ServerGroupList extends Core{constructor(e,t,i,r,n){super(e.getTool(),e.dev),this.core=e,this.uuid=t,this.network=i,this.name=r,this.servers=n}fromObject(e){return this.uuid=e.uuid,this.network=new Network(this.core).fromObject(e.network),this.name=e.name,this.servers=new Array,e.servers.forEach((e=>{this.servers.push(new Server(this.core).fromObject(e))})),this}asServerGroup(){return new ServerGroup(this.core,this.uuid,this.network,this.name)}}class GeoRestriction{constructor(e,t,i,r){this.index=e,this.country=t,this.state=i,this.city=r}fromObject(e){return this.index=e.index,this.country=e.country,this.state=e.state,this.city=e.city,this}getIndex(){return this.index}getCountry(){return this.country}getState(){return this.state}getCity(){return this.city}}class Key extends Core{constructor(e,t,i,r,n){super(e.getTool()),this.core=e,this.type=t,this.uuid=i,this.hash=r,this.instance=n}fromObject(e){return this.type=e.type,this.uuid=e.uuid,this.hash=e.hash,this.instance=new Instance(this.core,e.instance.uuid,e.instance.name,e.instance.type),this.restrict=e.restrict,this.allowedReferrers=new Array,e.allowedReferrers.forEach((e=>{this.allowedReferrers.push((new RefererRestriction).fromObject(e))})),this.allowedRegions=new Array,e.allowedRegions.forEach((e=>{this.allowedRegions.push((new GeoRestriction).fromObject(e))})),this}update(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return null!=this.uuid?new Call(this.core).commit({keyid:this.uuid},"key/from/id/").then((t=>new Key(e.core).fromObject(t))):new Call(this.core).commit({keyid:this.uuid},"key/from/hash/").then((t=>new Key(e.core).fromObject(t)))}))}setRestrict(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;var i="false";return e&&(i="true"),new Call(this.core).commit({keyid:this.uuid,enable:i},"key/restriction/enable/").then((e=>new Key(t.core).fromObject(e)))}))}addReferer(e){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({keyid:this.uuid,host:e},"key/restriction/host/add/").then((e=>(new RefererRestriction).fromObject(e)))}))}removeReferer(e){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({keyid:this.uuid,index:e},"restriction/host/remove/").then((e=>(new RefererRestriction).fromObject(e)))}))}addGeo(e,t,i){return __awaiter(this,void 0,void 0,(function*(){var r={};return r.keyid=this.uuid,r.country=e,null!=t&&(r.state=t),null!=i&&(r.city=i),new Call(this.core).commit(r,"restriction/geo/add/").then((e=>(new GeoRestriction).fromObject(e)))}))}removeGeo(e){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({keyid:this.uuid,index:e},"key/restriction/geo/remove/").then((e=>(new GeoRestriction).fromObject(e)))}))}}class RefererRestriction{constructor(e,t,i){this.index=e,this.domain=t,this.ip=i}fromObject(e){return this.index=e.index,this.domain=e.domain,this.ip=e.ip,this}getIndex(){return this.index}getDomain(){return this.domain}getIP(){return this.ip}}class BIOS{constructor(e,t){this.vendor=e,this.version=t}fromObject(e){return this.vendor=e.vendor,this.version=e.version,this}asArray(){return{vendor:this.vendor,version:this.version}}}class CPU{constructor(e,t,i,r,n,s,o){this.manufacturer=e,this.brand=t,this.vendor=i,this.speed=r,this.maxSpeed=n,this.physicalCores=s,this.virtualCores=o}fromObject(e){return this.manufacturer=e.manufacturer,this.brand=e.brand,this.vendor=e.vendor,this.speed=e.speed,this.maxSpeed=e.maxSpeed,this.physicalCores=e.physicalCores,this.virtualCores=e.virtualCores,this}asArray(){return{manufacturer:this.manufacturer,brand:this.brand,vendor:this.vendor,speed:this.speed,maxSpeed:this.maxSpeed,physicalCores:this.physicalCores,virtualCores:this.virtualCores}}}class CPUUsage{constructor(e,t,i){this.clockSpeed=e,this.relativeUsage=t,this.mainThreadSlip=i}}class Drive{constructor(e,t,i,r,n){this.size=e,this.name=t,this.type=i,this.interfaceType=r,this.serialNum=n}fromObject(e){return this.size=e.size,this.name=e.name,this.type=e.type,this.interfaceType=e.interfaceType,this.serialNum=e.serialNum,this}asArray(){return{size:this.size,name:this.name,type:this.type,interfaceType:this.interfaceType,serialNum:this.serialNum}}}class DriveUsage{constructor(e,t){this.max=e,this.used=t}}class Machine extends Core{constructor(e,t,i,r,n,s,o,a,h,c,u,l,d,m,w,p,y,g,v,f,k){super(e.getTool(),e.dev),this.core=e,this.templates=i,this.cpuOverlap=r,this.public=n,this.country=s,this.state=o,this.city=a,this.lat=h,this.long=c,this.hash=t,this.uuid=u,this.owner=l,this.ipv4=d,this.ipv6=m,this.port=w,this.bios=p,this.motherboard=y,this.cpu=g,this.ram=v,this.drives=f,this.adapters=k}getHosts(){return __awaiter(this,void 0,void 0,(function*(){let e=new Core(null,this.owner.core.dev);return yield new Call(e).commit({hash:this.hash},"machine/host/list/").then((function(t){let i=new Array;return t.forEach((t=>{i.push(new Host(e).fromObject(t))})),i}))}))}getHostAuths(){return __awaiter(this,void 0,void 0,(function*(){let e=new Core(null,this.owner.core.dev);return yield new Call(e).commit({hash:this.hash},"machine/host/auth/list").then((function(t){let i=new Array;return t.forEach((t=>{i.push(new HostAuth(e).fromObject(t))})),i}))}))}setIPV6(e){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(new Core(null,this.owner.core.dev)).commit({ipv6:e,hash:this.hash},"machine/update/").then((function(){return e}))}))}setIPV4(e){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(new Core(null,this.owner.core.dev)).commit({ipv4:e,hash:this.hash},"machine/update/").then((function(){return e}))}))}fromObject(e){return null!=e.uuid&&null!=e.uuid&&(this.uuid=e.uuid),this.templates=new Array,e.templates.forEach((e=>{this.templates.push(new HostingTemplate(this.core).fromObject(e))})),this.cpuOverlap=e.cpuOverlap,this.public=e.public,this.country=e.country,this.state=e.state,this.city=e.city,this.lat=e.lat,this.long=e.long,null!=e.owner&&null!=e.owner&&(this.owner=new Owner(new Core,e.id,e.name,e.surname,e.email)),null!=e.ipv4&&null!=e.ipv4&&(this.ipv4=e.ipv4),null!=e.ipv6&&null!=e.ipv6&&(this.ipv6=e.ipv6),null!=e.port&&null!=e.port&&(this.port=e.port),null!=e.bios&&null!=e.bios&&(this.bios=(new BIOS).fromObject(e.bios)),null!=e.motherboard&&null!=e.motherboard&&(this.motherboard=(new Motherboard).fromObject(e.motherboard)),null!=e.cpu&&null!=e.cpu&&(this.cpu=(new CPU).fromObject(e.cpu)),this.ram=new Array,e.ram.forEach((e=>{this.ram.push((new RAM).fromObject(e))})),this.drives=new Array,e.drives.forEach((e=>{this.drives.push((new Drive).fromObject(e))})),this.adapters=new Array,e.adapters.forEach((e=>{this.adapters.push((new NetworkAdapter).fromObject(e))})),this}updateComponents(e,t,i,r,n,s,o){return __awaiter(this,void 0,void 0,(function*(){let a=this;null!=e&&(t=new BIOS(e.bios.vendor,e.bios.version),i=new Motherboard(e.baseboard.manufacturer,e.baseboard.model),r=new CPU(e.cpu.manufacturer,e.cpu.brand,e.cpu.vendor,e.cpu.speed,e.cpu.speedmax,e.cpu.physicalCores,e.cpu.cores),n=new Array,e.memLayout.forEach((e=>{n.push(new RAM(e.size,e.clockSpeed,e.manufacturer))})),s=new Array,e.diskLayout.forEach((e=>{s.push(new Drive(e.size,e.name,e.type,e.interfaceType,e.serialNum))})),o=new Array,e.net.forEach((e=>{o.push(new NetworkAdapter(e.speed,e.ifaceName))})));var h={};if(null!=t&&null!=t&&(this.bios=t,h.bios=JSON.stringify(t.asArray())),null!=i&&null!=i&&(this.motherboard=i,h.motherboard=JSON.stringify(i.asArray())),null!=r&&null!=r&&(this.cpu=r,h.cpu=JSON.stringify(r.asArray())),null!=n&&null!=n){this.ram=n;var c=[];n.forEach((e=>{c.push(e.asArray())})),h.ram=JSON.stringify(c)}if(null!=s&&null!=s){this.drives=s;var u=[];s.forEach((e=>{u.push(e.asArray())})),h.drives=JSON.stringify(u)}if(null!=o&&null!=o){this.adapters=o;var l=[];o.forEach((e=>{l.push(e.asArray())})),h.adapters=JSON.stringify(l)}return h.hash=this.hash,yield new Call(new Core(null,this.owner.core.dev)).commit(h,"machine/update/").then((function(){return a}))}))}}class Motherboard{constructor(e,t){this.manufacturer=e,this.model=t}fromObject(e){return this.manufacturer=e.manufacturer,this.model=e.model,this}asArray(){return{manufacturer:this.manufacturer,model:this.model}}}class NetworkAdapter{constructor(e,t){this.speed=e,this.name=t}fromObject(e){return this.speed=e.speed,this.name=e.name,this}asArray(){return{speed:this.speed,name:this.name}}}class RAM{constructor(e,t,i,r){this.size=e,this.clockSpeed=t,this.manufacturer=i,this.voltage=r}fromObject(e){return this.size=e.size,this.clockSpeed=e.clockSpeed,this.manufacturer=e.manufacturer,this.voltage=e.voltage,this}asArray(){return{size:this.size,clockSpeed:this.clockSpeed,manufacturer:this.manufacturer,voltage:this.voltage}}}class RAMUsage{constructor(e,t){this.max=e,this.used=t}}class AccountNotification extends Core{constructor(e,t,i,r,n,s,o,a){super(e.getTool(),e.dev),this.core=e,this.uuid=t,this.seen=i,this.title=r,this.message=n,this.action=s,this.account=o,this.creation=a}fromObject(e){return this.uuid=e.uuid,this.seen=e.seen,this.title=e.title,this.message=e.message,this.action=e.action,this.account=new Account(this.core).fromObject(e.account),this.creation=new Date(1e3*e.creation),this}}class Appeal extends Core{constructor(e,t,i,r,n,s,o){super(e.getTool()),this.uuid=t,this.punishment=i,this.content=r,this.staffResponse=n,this.staffMember=s,this.accepted=o}}class AppealStatus extends Core{constructor(e,t,i){super(e.getTool()),this.status=t,this.appealId=i}getAppeal(){}toString(){return this.status}}class Offence extends Core{constructor(e,t,i,r,n,s,o){super(e.getTool()),this.core=e,this.uuid=t,this.type=i,this.network=r,this.name=n,this.description=s,this.negativePoints=o}fromObject(e){return this.uuid=e.uuid,this.type=e.type,this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.name=e.name,this.description=e.description,this.negativePoints=parseInt(e.negativePoints),this}getType(){return this.type}getName(){return this.name}getDescription(){return this.description}getNegativePoints(){return this.negativePoints}}class OffenceAction extends Core{constructor(e,t,i,r,n,s,o,a,h){super(e.getTool()),this.core=e,this.uuid=t,this.cmd=i,this.requiredPoints=r,this.network=n,this.pointsType=s,this.punishmentType=o,this.name=a,this.description=h}fromObject(e){return this.uuid=e.uuid,this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.cmd=new Command(this.core,e.cmd.cmdId,e.cmd.cmdString,this.network),this.requiredPoints=parseInt(e.requiredPoints),this.pointsType=e.pointsType,this.punishmentType=e.punishmentType,this.name=e.name,this.description=e.description,this}}class Punishment extends Core{constructor(e,t,i,r,n,s,o,a,h,c){super(e.getTool()),this.core=e,this.player=t,this.offenceList=i,this.moderator=r,this.network=n,this.pointsChat=s,this.pointsGameplay=o,this.report=a,this.notes=h,this.appealStatus=c}fromObject(e){this.uuid=e.uuid,this.player=new Player(this.core,e.player.coreid,e.player.username,e.player.uuid,e.player.verified);var t=new Array;return e.offenceList.forEach((e=>{var i=new Offence(this.core);t.push(i.fromObject(e))})),this.offenceList=t,this.moderator=new Player(this.core,e.createdBy.coreid,e.createdBy.username,e.createdBy.uuid,e.createdBy.verified),this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.pointsChat=e.pointsAddedChat,this.pointsGameplay=e.pointsAddedGameplay,null==e.report&&(this.report=null),this.appealStatus=new AppealStatus(this.core,e.appealStatus.status,e.appealStatus.appealId),this}getStatus(){return this.appealStatus}getPlayer(){return this.player}getOffenceList(){return this.offenceList}getPoints(e){if("GMP"==e)return this.pointsGameplay;if("CHT"==e)return this.pointsChat;throw new Error("invalid point selection type")}}class Report{constructor(e){}}class Session extends Core{constructor(e,t,i,r,n,s,o,a){super(e.getTool(),e.dev),this.core=e,this.uuid=t,this.hash=i,this.device=r,this.location=n,this.usage=s,this.network=o,a instanceof Player?this.player=a:a instanceof Owner&&(this.owner=a)}getOwner(){return null==this.owner?new Owner(this.core,null,null,null,null):this.owner}getUser(){return null==this.player&&null!=this.owner?new Owner(this.core,this.owner.getId(),this.owner.getName(),this.owner.getSurname(),this.owner.getEmail()):new Player(this.core,this.player.getId(),this.player.getUsername(),this.player.getUuid(),this.player.verified)}fromObject(e){var t=this.core;return this.uuid=e.uuid,this.hash=e.hash,this.device=new SessionDevice(e.device.brand,e.device.device,e.device.model,e.device.os),this.location=new SessionLocation(e.location.city,e.location.state,e.location.country_code),this.usage=new SessionUsage(e.usage.creation,e.usage.uses),"network"in e?(this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.core=new Core(new Session(new Core(null,t.dev),this.uuid,this.hash,this.device,this.location,this.usage,this.network,null),t.dev)):this.core=new Core(new Session(new Core(null,t.dev),this.uuid,this.hash,this.device,this.location,this.usage,null,null),t.dev),"player"in e?this.player=new Player(this.core,e.player.coreid,e.player.username,e.player.uuid,e.player.verified):"owner"in e&&(this.owner=new Owner(this.core,e.owner.uuid,e.owner.name,e.owner.surname,e.owner.email)),this}fromHash(e){return __awaiter(this,void 0,void 0,(function*(){var t=this.core,i=e;return yield new Call(this.core).commit({hash:i},"session/get/").then((function(e){return new Session(t).fromObject(e)}))}))}getId(){return this.uuid}getHash(){return this.hash}getPlayer(){return null==this.player?new Player(this.core,null):this.player}getMachines(){return __awaiter(this,void 0,void 0,(function*(){var e=this.hash;return yield new Call(this.core).commit({hash:e},"machine/list/").then((function(e){var t=new Array;return e.forEach((e=>{t.push(new Machine(this.core).fromObject(e))})),t}))}))}getNetworks(){return __awaiter(this,void 0,void 0,(function*(){var e=this.core;return yield new Call(this.core).commit({},"instance/network/list/").then((function(t){var i=new Array;return t.forEach((t=>{i.push(new Network(e,new Instance(e,t.uuid,t.name,"NTW")))})),i}))}))}}class SessionDevice{constructor(e,t,i,r){this.brand=e,this.device=t,this.model=i,this.os=r}}class SessionLocation{constructor(e,t,i){this.city=e,this.state=t,this.country_code=i}}class SessionRequest extends Core{constructor(e,t,i,r,n,s,o){super(e.getKey()),this.core=e,this.uuid=t,this.token=i,this.validated=r,this.player=n,this.network=s,this.type=o}isValidated(){return this.validated}getValidationUrl(){return"https://api.purecore.io/link/discord/redirect/?uuid="+this.uuid+"&hash="+this.token}getToken(){return this.token}getSession(){return __awaiter(this,void 0,void 0,(function*(){var e=this.core,t=this.token;return yield new Call(this.core).commit({token:t},"session/hash/token/exchange/").then((function(t){return new Session(e).fromObject(t)}))}))}}class SessionUsage{constructor(e,t){this.creation=e,this.uses=t}}class StoreCategory extends Core{constructor(e,t,i,r,n,s){super(e.getTool()),this.core=e,this.uuid=t,this.name=i,this.description=r,this.network=n,this.upgradable=s}fromObject(e){return this.uuid=e.uuid,this.name=e.name,this.description=e.description,this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.upgradable=e.upgradable,this}getId(){return this.uuid}createItem(e,t,i){return __awaiter(this,void 0,void 0,(function*(){let r=this;return new Call(this.core).commit({network:this.network.uuid,name:e,description:t,category:this.uuid,price:i},"store/item/create/").then((e=>new StoreItem(r.core).fromObject(e)))}))}}class StoreItem extends Core{constructor(e,t,i,r,n,s,o,a){super(e.getTool()),this.core=e,this.uuid=t,this.name=i,this.description=r,this.category=n,this.network=s,this.price=o,this.perks=new Array}addPerk(e,t="undefined"){return __awaiter(this,void 0,void 0,(function*(){let i=this;var r=null;return r="string"==typeof e?e:e.uuid,new Call(this.core).commit({network:this.network.uuid,item:this.uuid,perk:r,quantity:t},"store/item/add/perk/").then((e=>new PerkContextualized(i.core).fromObject(e)))}))}getId(){return this.uuid}fromObject(e){return this.uuid=e.uuid,this.name=e.name,this.description=e.description,this.category=new StoreCategory(this.core).fromObject(e.category),this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.price=e.price,null!=e.perks?e.perks.forEach((e=>{this.perks.push(new PerkContextualized(this.core).fromObject(e))})):this.perks=new Array,this}getOrganizedPerks(){var e=[];this.perks.forEach((t=>{t.perk.category.uuid in e||(e[t.perk.category.uuid]=new Array),e[t.perk.category.uuid].push(t)}));var t=new Array;for(const n in e){var i=null;e[n].forEach((e=>{e.perk.category.uuid==n&&(i=e.perk.category)}));var r=new OrganizedPerkCategory(i,e[n]);t.push(r)}return t}}class NestedItem extends Core{constructor(e){super(e.getTool()),this.core=e}fromObject(e){return this.category=new StoreCategory(this.core).fromObject(e.category),this.uuid=this.category.getId(),this.items=new Array,e.products.forEach((e=>{this.items.push(new StoreItem(this.core).fromObject(e))})),this}getCategory(){return this.category}getItems(){return this.items}}class OrganizedPerkCategory{constructor(e,t){this.perkCategory=e,this.perkList=t}getPerks(){return this.perkList}getCategory(){return this.perkCategory}}class ParamRequirement{constructor(e,t){this.type=e,this.value=t}}class Perk extends Core{constructor(e,t,i,r,n,s,o,a,h){super(e.getTool(),e.dev),this.core=e,this.uuid=t,this.network=i,this.name=r,this.description=n,this.type=s,this.category=o,this.commands=a,this.params=h}fromObject(e){this.uuid=e.uuid,this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.name=e.name,this.description=e.description,this.type=e.type,this.category=new PerkCategory(this.core).fromObject(e.category);var t=new Array;return e.commands.forEach((e=>{t.push(new StoreCommand(this.core).fromObject(e))})),this.commands=t,this.params=new Array,null==e.params?this.params=null:e.params.forEach((e=>{this.params.push(new PerkParam(this.core).fromObject(e))})),this}addParam(e,t,i,r,n,s){return __awaiter(this,void 0,void 0,(function*(){null==n&&(n=!1),null==s&&(s="null");var o=null;return o=n?"true":"false",new Call(this.core).commit({perk:this.uuid,placeholder:e,name:t,description:i,type:r,mandatory:o,default:s},"store/perk/param/add/").then((e=>new PerkParam(this.core).fromObject(e)))}))}addCmd(e,t,i){return __awaiter(this,void 0,void 0,(function*(){let r=this.core;var n=[];i.forEach((e=>{n.push(e.uuid)}));return t&&"true",new Call(this.core).commit({network:this.uuid,perk:this.uuid,cmd:e,needsOnline:t,instances:JSON.stringify(n)},"store/perk/cmd/add/").then((e=>{var t=new Array;return e.forEach((e=>{t.push(new StoreCommand(r).fromObject(e))})),t}))}))}}class PerkCategory extends Core{constructor(e,t,i,r){super(e.getTool()),this.core=e,this.uuid=t,this.name=i,this.network=r}fromObject(e){this.uuid=e.uuid,this.name=e.name;try{this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW"))}catch(e){this.network=null}return this}createPerk(e,t,i){return __awaiter(this,void 0,void 0,(function*(){let r=this.core;return new Call(this.core).commit({network:this.uuid,name:e,description:t,type:i.toUpperCase(),category:this.uuid},"store/perk/create/").then((e=>new Perk(r).fromObject(e)))}))}}class PerkContextualized extends Core{constructor(e,t,i){super(e.getTool()),this.core=e,this.perk=t,this.quantity=i}fromObject(e){return this.perk=new Perk(this.core).fromObject(e.perk),this.quantity=e.quantity,this}}class PerkParam extends Core{constructor(e,t,i,r,n,s,o,a,h,c,u){super(e.getTool(),e.dev),this.core=e,this.uuid=t,this.placeholder=i,this.perk=r,this.name=n,this.description,this.network=o,this.type=a,this.default=h,this.mandatory=c,this.requirements=u}fromObject(e){return this.uuid=e.uuid,this.placeholder=e.placeholder,this.perk=new Perk(this.core).fromObject(e.perk),this.name=e.name,this.description=e.description,this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.type=e.type,this.default=e.default,this.mandatory=e.mandatory,this.requirements=new Array,e.requirements.forEach((e=>{this.requirements.push(new ParamRequirement(e.type,e.value))})),this}addRequirement(e,t){return __awaiter(this,void 0,void 0,(function*(){var i=t;return"string"!=typeof t&&(i=JSON.stringify(t)),new Call(this.core).commit({param:this.uuid,type:e,value:i},"store/perk/param/requirement/add/").then((()=>new ParamRequirement(e,t)))}))}removeRequirement(e){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({param:this.uuid,type:e},"store/perk/param/requirement/remove/").then((()=>!0))}))}test(e){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({param:this.uuid,str:e},"store/perk/param/requirement/test/").then((()=>!0))}))}}class Store extends Network{constructor(e){super(e.core,e.asInstance()),this.network=e}getIncomeAnalytics(e=86400){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({network:this.uuid,span:e},"store/income/analytics/").then((e=>{var t=new Array;return e.forEach((e=>{var i=(new IncomeAnalytic).fromObject(e);t.push(i)})),t}))}))}getItem(e){return __awaiter(this,void 0,void 0,(function*(){let t=this.core;return new Call(this.core).commit({network:this.uuid,item:e},"store/item/").then((e=>new StoreItem(t).fromObject(e)))}))}getPerks(){return __awaiter(this,void 0,void 0,(function*(){var e=this.core;return new Call(this.core).commit({network:this.uuid},"store/perk/list/").then((t=>{var i=new Array;return t.forEach((t=>{i.push(new Perk(e).fromObject(t))})),i}))}))}getPerkCategories(){return __awaiter(this,void 0,void 0,(function*(){var e=this.core;return new Call(this.core).commit({network:this.uuid},"store/perk/category/list/").then((t=>{var i=new Array;return t.forEach((t=>{i.push(new PerkCategory(e).fromObject(t))})),i}))}))}getGateways(){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({network:this.uuid},"store/gateway/list/").then((e=>{var t=new Array;return e.forEach((e=>{var i=new Gateway(e.name,null,null,null);t.push(i)})),t}))}))}itemIdList(e){var t=new Array;return e.forEach((e=>{t.push(new StoreItem(new Core,e.uuid))})),t}itemIdListFromJSON(e){var t=new Array;return e.forEach((e=>{t.push(new StoreItem(new Core,e.uuid))})),t}getStripeWalletLink(){return"https://api.purecore.io/link/stripe/wallet/?hash="+this.network.core.getCoreSession().getHash()+"&network="+this.network.getId()}getPayPalWalletLink(){return"https://api.purecore.io/link/paypal/wallet/?hash="+this.network.core.getCoreSession().getHash()+"&network="+this.network.getId()}requestPayment(e,t,i){return __awaiter(this,void 0,void 0,(function*(){null==i&&(i=new BillingAddress);let r=this.network.core;var n=[];return e.forEach((e=>{n.push(e.uuid)})),new Call(this.core).commit({network:this.uuid,username:t,products:escape(JSON.stringify(n)),billing:JSON.stringify(i)},"payment/request/").then((e=>new CorePaymentRequest(r).fromObject(e)))}))}getNetwork(){return this.network}getPayments(e){return __awaiter(this,void 0,void 0,(function*(){var t=this.network.core;return null==e&&null==e||e,new Call(this.core).commit({network:this.uuid,page:e},"/payment/list/").then((e=>{var i=new Array;return e.forEach((e=>{i.push(new Payment(t).fromObject(e))})),i}))}))}unlinkGateway(e){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({network:this.uuid,gateway:e},"store/gateway/unlink/").then((e=>e.success))}))}createPerkCategory(e){return __awaiter(this,void 0,void 0,(function*(){let t=this.core;return new Call(this.core).commit({network:this.uuid,name:e},"store/perk/category/create/").then((e=>new PerkCategory(t).fromObject(e)))}))}createCategory(e,t){return __awaiter(this,void 0,void 0,(function*(){var i=this.core;return new Call(this.core).commit({network:this.uuid,name:e,description:t},"store/category/create/").then((e=>new StoreCategory(i).fromObject(e)))}))}getCategories(){return __awaiter(this,void 0,void 0,(function*(){return new Promise((function(e,t){try{this.getPackages().then((function(t){var i=new Array;t.forEach((e=>{i.push(e.category)})),e(i)}))}catch(e){t(e)}}))}))}getPackages(){return __awaiter(this,void 0,void 0,(function*(){let e=this.network.core;return new Call(this.core).commit({network:this.uuid},"store/item/list/").then((t=>{var i=new Array;return t.forEach((t=>{i.push(new NestedItem(e).fromObject(t))})),i}))}))}}class StoreCommand extends Core{constructor(e,t,i,r,n,s){super(e.getTool()),this.core=e,this.network=t,this.cmd=i,this.needsOnline=r,this.executeOn=n,this.listId=s}fromObject(e){this.network=new Instance(this.core,e.network.uuid,e.network.name,"NTW").asNetwork(),"string"==typeof e.cmd?this.cmd=new Command(this.core,e.cmd,null,this.network):this.cmd=new Command(this.core,e.cmd.cmdId,e.cmd.cmdString,this.network),this.needsOnline=e.needs_online,this.listId=e.listid;var t=new Array;return e.execute_on.forEach((e=>{"string"==typeof e?t.push(new Instance(this.core,e,null,"UNK")):t.push(new Instance(this.core,e.uuid,e.name,"UNK"))})),this.executeOn=t,this}getCommand(){return this.cmd}}class BillingAddress{constructor(e,t,i,r,n,s,o,a){this.name=e,this.email=t,this.city=n,this.country=i,this.state=r,this.postalcode=s,this.line1=o,this.line2=a}fromObject(e){return this.name=e.name,this.email=e.email,this.country=e.country,this.state=e.state,this.city=e.city,this.postalcode=e.postalcode,this.line1=e.line1,null!=e.line2&&""!=e.line2?this.line2=e.line2:this.line2=null,this}}class Discount{constructor(e,t,i,r){this.type=e,this.uuid=t,this.description=i,this.amount=r}}class Gateway{constructor(e,t,i,r){this.name=e,this.url=t,this.color=i,this.logo=r}}class Payment extends Core{constructor(e,t,i,r,n,s,o,a,h){super(e.getTool()),this.core=e,this.uuid=t,this.request=i,this.gateway=r,this.metadata=n,this.network=s,this.legacyUsername=o,this.player=a,this.sessions=new Array}fromObject(e){this.uuid=e.uuid,this.request=new CorePaymentRequest(this.core).fromObject(e.request),this.gateway=new Gateway(e.gateway.name,e.gateway.url,e.gateway.color,e.gateway.logo),this.metadata=e.metadata,this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.legacyUsername=e.legacyUsername;try{this.player=new Player(this.core,e.player.coreid,e.player.username,e.player.uuid,e.player.verified)}catch(e){this.player=null}return this}}class CorePaymentRequest extends Core{constructor(e){super(e.getTool()),this.core=new Core(e.getTool()),this.products=new Array,this.sessionList=new Array,this.warnings=new Array,this.discounts=new Array,this.gateways=new Array}isPaid(){return __awaiter(this,void 0,void 0,(function*(){return new Call(this.core).commit({request:this.uuid},"payment/request/isPaid/").then((e=>e.paid))}))}fromObject(e){this.uuid=e.uuid,this.store=new Store(new Network(this.core,new Instance(this.core,e.store.network.uuid,e.store.network.name,"NTW"))),e.products.forEach((e=>{this.products.push(new StoreItem(this.core).fromObject(e))})),this.username=e.username;try{this.player=new Player(this.core,e.player.coreid,e.player.username,e.player.uuid,e.player.verified)}catch(e){this.player=null}return null!=e.sessionList&&e.sessionList.forEach((e=>{})),null!=e.warnings&&e.warnings.forEach((e=>{try{this.warnings.push(new Warning(e.cause,e.text))}catch(e){}})),null!=e.discounts&&e.discounts.forEach((e=>{try{this.discounts.push(new Discount(e.type,e.id,e.description,e.amount))}catch(e){}})),null!=e.gateways&&e.gateways.forEach((e=>{this.gateways.push(new Gateway(e.name,e.url,e.color,e.logo))})),this.due=e.due,this.currency=e.currency,this}}class Warning{constructor(e,t){this.cause=e,this.text=t}}class Account extends Core{constructor(e,t){super(e.getTool(),e.dev),this.core=e,this.uuid=t}fromObject(e){return this.uuid=e.uuid,this}getPendingNotifications(){return __awaiter(this,void 0,void 0,(function*(){let e=this;return yield new Call(this.core).commit({},"account/notification/pending/list/").then((function(t){let i=new Array;return t.forEach((t=>{i.push(new AccountNotification(e.core).fromObject(t))})),i}))}))}}class Owner extends Core{constructor(e,t,i,r,n){super(e.getTool()),this.core=e,this.id=t,this.name=i,this.surname=r,this.email=n}getName(){return this.name}getSurname(){return this.surname}getEmail(){return this.email}getId(){return this.id}getSession(){return this.core.getTool()}stripeSubscribe(e,t,i){return __awaiter(this,void 0,void 0,(function*(){if(null==i)({plan:e,billing:JSON.stringify(t)});else{var r=null;r="string"==typeof i?i:i.paymentMethod.id,{plan:e,billing:JSON.stringify(t),pm:r}}return yield new Call(this.core).commit({},"account/subscribe/stripe/").then((function(e){return new StripeSubscription(e.id)}))}))}asAccount(){return new Account(this.core,this.id)}paypalSubscribe(e,t){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(this.core).commit({plan:e,billing:JSON.stringify(t)},"account/subscribe/paypal/").then((function(e){return new PayPalSubscription(e.url,e.id)}))}))}getBillingAddress(){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(this.core).commit({},"account/billing/get/").then((function(e){return(new BillingAddress).fromObject(e)}))}))}updateBillingAddress(e){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(this.core).commit({billing:JSON.stringify(e)},"account/billing/update/").then((function(e){return(new BillingAddress).fromObject(e)}))}))}addPaymentMethod(e){return __awaiter(this,void 0,void 0,(function*(){var t=null;return t="string"==typeof e?e:e.paymentMethod.id,yield new Call(this.core).commit({pm:t},"account/card/add/").then((function(e){return e}))}))}removePaymentMethod(e){return __awaiter(this,void 0,void 0,(function*(){var t=null;return t="string"==typeof e?e:e.paymentMethod.id,yield new Call(this.core).commit({pm:t},"account/card/remove/").then((function(e){return e.success}))}))}getPaymentMethods(){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(this.core).commit({},"account/card/list/").then((function(e){return e}))}))}createTemplate(e,t,i,r,n){return __awaiter(this,void 0,void 0,(function*(){var s=this.core,o={};return o=null==n?{supportedImages:JSON.stringify(e),memory:String(t),size:String(i),cores:String(r),price:String(n)}:{supportedImages:JSON.stringify(e),memory:String(t),size:String(i),cores:String(r)},yield new Call(this.core).commit(o,"hosting/template/create/").then((function(e){return new HostingTemplate(s).fromObject(e)}))}))}createNetwork(e,t,i,r,n){return __awaiter(this,void 0,void 0,(function*(){var s=this.core,o={};return o=null==r?{name:e,game:t,cname:i}:null==n?{name:e,game:t,cname:i,ip:r}:{name:e,game:t,cname:i,ip:r,port:n},yield new Call(this.core).commit(o,"instance/network/create/").then((function(e){return new Network(s,new Instance(s,e.uuid,e.name,"NTW"))}))}))}}class Player extends Core{constructor(e,t,i,r,n){super(e.getKey(),e.dev),this.core=e,this.id=t,this.username=i,this.uuid=r,this.verified=n}fromObject(e){return this.id=e.coreid,this.username=e.username,this.uuid=e.uuid,this.verified=e.verified,this}closeConnections(e){return __awaiter(this,void 0,void 0,(function*(){var t=this.core;return yield new Call(t).commit({instance:e.getId(),uuid:this.uuid},"connection/close/all/").then((function(e){var i=new Array;return e.forEach((e=>{i.push(new Connection(t).fromObject(e))})),i}))}))}openConnection(e,t){return __awaiter(this,void 0,void 0,(function*(){var i=this.core;return yield new Call(i).commit({instance:t.getId(),ip:e,username:this.username,uuid:this.uuid},"connection/new/").then((function(e){return new Connection(i).fromObject(e)}))}))}getBillingAddress(){return __awaiter(this,void 0,void 0,(function*(){var e=this.core;return yield new Call(e).commit({},"player/billing/get/").then((function(e){return(new BillingAddress).fromObject(e)}))}))}getPunishments(e,t){return __awaiter(this,void 0,void 0,(function*(){var i=this.id,r=this.core;var n={};return n=null!=e?{page:t.toString(),player:i,network:e.getId()}:{player:i,page:t.toString()},yield new Call(r).commit(n,"player/punishment/list/").then((function(e){var t=new Array;return e.forEach((e=>{t.push(new Punishment(r).fromObject(e))})),t}))}))}getPayments(e,t){return __awaiter(this,void 0,void 0,(function*(){var i=this.id,r=this.core,n=0;return null==t&&null==t||(n=t),yield new Call(r).commit({network:e.getNetwork().getId(),page:n.toString(),player:i},"player/payment/list/").then((function(e){var t=new Array;return e.forEach((e=>{t.push(new Payment(r).fromObject(e))})),t}))}))}getDiscordId(){return __awaiter(this,void 0,void 0,(function*(){return yield new Call(this.core).commit({},"player/payment/list/").then((function(e){return String(e.id)}))}))}getConnections(e,t){return __awaiter(this,void 0,void 0,(function*(){var i=this.id,r=this.core,n=0;null==t&&null==t||(n=t);var s={};return s=null!=e?{page:n,player:i,instance:e.getId()}:{page:n,player:i},yield new Call(this.core).commit(s,"player/connection/list/").then((function(e){var t=new Array;return e.forEach((e=>{t.push(new Connection(r).fromObject(e))})),t}))}))}getMatchingConnections(e,t,i){return __awaiter(this,void 0,void 0,(function*(){var r=this.id,n=0,s=[];return i.forEach((e=>{s.push(e.getId())})),null==t&&null==t||(n=t),yield new Call(this.core).commit({instance:e.getId(),page:n,players:JSON.stringify(s),player:r},"connection/list/match/players/").then((function(e){var t=new Array;return e.forEach((e=>{var i=new Array;e.matchList.forEach((e=>{var t=new MatchingRange(new Date(1e3*e.startedOn),new Date(1e3*e.finishedOn),e.matchWith);i.push(t)})),t.push(new ActivityMatch(new Date(1e3*e.startedOn),new Date(1e3*e.finishedOn),e.activity,i))})),t}))}))}getId(){return this.id}getUuid(){return this.uuid}getUsername(){return this.username}}class VotingSite extends Core{constructor(e,t,i,r,n,s,o,a){super(e.getTool()),this.core=e,this.uuid=t,this.supervisor=i,this.resetTimes=r,this.timezone=n,this.name=s,this.url=o}fromObject(e){return this.uuid=e.uuid,this.supervisor=new Owner(this.core,e.supervisor.id,e.supervisor.name,e.supervisor.surname,e.supervisor.email),this.resetTimes=e.resetTimes,this.timezone=e.timezone,this.name=e.name,this.url=e.url,this.technicalName=e.technicalName,this}getConfig(e,t=!0){return __awaiter(this,void 0,void 0,(function*(){if(t)return new VotingSiteConfig(this.core,e,this,null);throw new Error("to be implemented")}))}}class VotingSiteConfig extends Core{constructor(e,t,i,r){super(e.getTool()),this.core=e,this.network=t,this.votingSite=i,this.url=r}fromObject(e){return this.votingSite=new VotingSite(this.core).fromObject(e.votingSite),this.network=new Network(this.core,new Instance(this.core,e.network.uuid,e.network.name,"NTW")),this.url=e.url,this}setURL(e){return __awaiter(this,void 0,void 0,(function*(){let t=this;return new Call(this.core).commit({network:this.network.uuid,url:e,site:this.votingSite.uuid},"instance/network/voting/site/setup/").then((e=>(t.url=e.url,this)))}))}}